(self.webpackChunk=self.webpackChunk||[]).push([[2714],{82077:(e,t)=>{"use strict";t.SCORM_WRAPPER_INIT="SCORM_WRAPPER_INIT",t.SCORM_WRAPPER_CHANGE="SCORM_WRAPPER_CHANGE",t.SCORM_DESERIALISE="SCORM_DESERIALISE",t.SCORM_ERROR="SCORM_ERROR",t.SCORM_FINISH="SCORM_FINISH",t.scormWrapperInit=()=>({type:t.SCORM_WRAPPER_INIT}),t.scormWrapperChange=e=>({type:t.SCORM_WRAPPER_CHANGE,payload:e}),t.scormDeserialise=()=>({type:t.SCORM_DESERIALISE}),t.scormError=e=>({type:t.SCORM_ERROR,payload:e}),t.scormFinish=e=>({type:t.SCORM_FINISH,payload:e})},92657:(e,t,i)=>{"use strict";const s=i(11104),r=i(72579),o=i(82421),n=i(17620),{Observable:a}=i(28761),{SETUP_DATA:c,setDataReadyState:l,setLearner:u}=i(63444),{TRACKABLE_CHANGE:d}=i(59828),{WINDOW_BEFORE_UNLOAD:h,WINDOW_UNLOAD:p}=i(36498),{COMPONENT_COMPLETED:m}=i(29933),{setTracking:g,getTrackingImmediately:S}=i(84491),f=i(274),C=i(15240),_=i(16488).getInstance(),{SCORM_WRAPPER_INIT:R,SCORM_DESERIALISE:I,SCORM_ERROR:O,SCORM_FINISH:y,scormWrapperInit:M,scormWrapperChange:E,scormDeserialise:w,scormError:v}=i(82077);t.scormDataReadyEpic=(e,t)=>e.filter((e=>{var i;return e.type===c&&(null===(i=t.getState().scorm)||void 0===i?void 0:i._isEnabled)})).mergeMap((()=>a.concat(a.of(l("scorm",!1)),a.of(M()),a.of(w()),a.of(l("scorm",!0))))),t.scormWrapperInitEpic=(e,t)=>e.ofType(R).map((()=>{const{scorm:e}=t.getState(),i=r(e,"_useAdvancedTracking",!1);let o=!1,n={};if(_.suppressErrors=!0!==e._shouldShowScormErrors,_.setVersion("2004_3rd"===e._scormVersion?"2004":e._scormVersion),_.initialize()&&(o=!0),o){const e=_.getSuspendData();e&&(i?(n=s.decompress(e,{inputEncoding:"Base64"}),n=JSON.parse(n)):i||r(n,"completion",!1)?!i&&r(n,"completion",!1)&&(n={_isComplete:n._isCourseComplete,_isPassed:n._isAssessmentPassed,_assessmentAttemptsTaken:n._assessmentAT,_state:n.completion,_lastCompletedComponentId:n._lastCompletedComponentId}):n=JSON.parse(e.replace(/'/g,'"')))}return E({hasWrapperInitialised:o,suspendData:n})})),t.scormDeserialiseEpic=(e,t)=>e.filter((e=>{const i=t.getState();if(e.type!==I)return!1;const{scorm:s}=i;return(null==s?void 0:s._isEnabled)&&(null==s?void 0:s.hasWrapperInitialised)&&!(null!=s&&s.hasSCOFinished)})).mergeMap((()=>{const e=t.getState(),{scorm:i}=e,s=[];if(r(i,"suspendData._state",!1)){const t=r(i,"_useAdvancedTracking",!1);let s={};s=o({},i.suspendData,t?{_state:C(i.suspendData._state,e,!0)}:{_state:{_components:C(i.suspendData._state,e,!1)}}),g(s,!0)}let n=_.getStudentName();if(n){const e=r(i,"_shouldUseSpaceSeparatedNameFormat",!1)?" ":",";n=n.split(e),n.length&&s.push(u({_id:`${n[1]} ${n[0]}`,firstName:n[1],lastName:n[0]}))}return s.length?a.of(...s):a.empty()})),t.scormTrackerChangeEpic=(e,t)=>e.filter((e=>{const i=t.getState();if(i.app.isDataReady&&i.app.hasAppStarted&&(e.type===m||e.type===d)){const{scorm:e}=i;return(null==e?void 0:e._isEnabled)&&(null==e?void 0:e.hasWrapperInitialised)&&!(null!=e&&e.hasSCOFinished)}return!1})).delay(100).map((e=>{const{scorm:i}=t.getState(),a=S(),{_status:c,_score:l,_state:u}=a;let d=r(i,"suspendData._lastCompletedComponentId","");const h=r(i,"_useAdvancedTracking",!1),p=r(i,"_shouldSendScore",!0),g=f(u,h);e.type===m&&(d=e.payload.componentId);const C=n(o({},a,{_state:g,_lastCompletedComponentId:d}),["_id","_createdAt","_updatedAt","_hasStarted"]);let R=JSON.stringify(C);h&&(R=s.compress(R,{outputEncoding:"Base64"}));try{_.setSuspendData(R),console.log(`SCORM suspend data size: ${new Blob([R]).size} bytes`),p&&_.setScore(l,0,100),"complete"===c||"passed"===c?_.setStatus(i._reporting._onTrackingCriteriaMet):"failed"===c?_.setStatus(i._reporting._onAssessmentFailure):_.setStatus("incomplete")}catch(e){return console.error(e),v(e)}return E({suspendData:C})})),t.scormFinishEpic=(e,t)=>e.filter((e=>{const i=t.getState();if([p,h,y].includes(e.type)){const{scorm:e}=i;return(null==e?void 0:e._isEnabled)&&(null==e?void 0:e.hasWrapperInitialised)&&!(null!=e&&e.hasSCOFinished)}return!1})).map((()=>{const{scorm:e}=t.getState(),i=S(),{_state:a}=i,c=r(e,"suspendData._lastCompletedComponentId",""),l=r(e,"_useAdvancedTracking",!1),u=r(e,"_cmiExitState","auto"),d=f(a,l),h=n(o({},i,{_state:d,_lastCompletedComponentId:c}),["_id","_createdAt","_updatedAt","_hasStarted"]);let p=JSON.stringify(h);l&&(p=s.compress(p,{outputEncoding:"Base64"}));try{_.setSuspendData(p),_.finish(u)}catch(e){return console.error(e),v(e)}return E({hasSCOFinished:!0})})),t.scormErrorEpic=e=>e.ofType(O).do((()=>{window.alert("There has been an error saving your progress to the LMS.")})).ignoreElements()},15240:(e,t,i)=>{"use strict";const s=i(92191),r=i(93806);e.exports=(e,t,i)=>{const{components:o,blocks:n,articles:a,contentObjects:c,logic:l}=t;if(i){const t={};return t._components=s(o).keys().map(((t,i)=>{const s=e._components[i];return s?{_id:t,_isHidden:1===s[0],_isComplete:1===s[1],_isCorrect:1===s[2]}:{_id:t}})).keyBy("_id").value(),t._blocks=s(n).keys().map(((t,i)=>{const s=e._blocks[i];return s?{_id:t,_isHidden:1===s[0]}:{_id:t}})).keyBy("_id").value(),t._articles=s(a).keys().map(((t,i)=>{const s=e._articles[i];return s?{_id:t,_isHidden:1===s[0]}:{_id:t}})).keyBy("_id").value(),t._contentObjects=s(c).keys().map(((t,i)=>{const s=e._contentObjects[i];return s?{_id:t,_isHidden:1===s[0]}:{_id:t}})).keyBy("_id").value(),t._variables=s(l.variables).keys().map(((t,i)=>{const s=e._variables[i];return s?{_id:t,_value:s[0]}:{_id:t}})).keyBy("_id").value(),e._triggers?t._triggers=s(l.triggers.byRefId).keys().map(((t,i)=>{const s=l.triggers.byRefId[t],r=e._triggers[i];return r?{_id:s._id,_isEnabled:1===r[0]}:{_id:s._id}})).keyBy("_id").value():t._triggers={},t}return function(e,t){const i=e.split("");return s(t).keys().map(((e,t)=>{const s={_id:e,_isComplete:!1,_isCorrect:!1};switch(i[t]){case r.NOT_COMPLETE:break;case r.COMPLETE:s._isComplete=!0;break;case r.COMPLETE_NOT_CORRECT:s._isComplete=!0,s._isCorrect=!1;break;case r.COMPLETE_CORRECT:s._isComplete=!0,s._isCorrect=!0}return s})).keyBy("_id").value()}(e,o)}},93806:e=>{"use strict";e.exports={NOT_COMPLETE:"0",COMPLETE:"1",COMPLETE_NOT_CORRECT:"2",COMPLETE_CORRECT:"3"}},274:(e,t,i)=>{"use strict";const s=i(16760),r=i(82421),o=i(79421),n=i(93806);e.exports=(e,t)=>{if(t){const t={};return t._components=s(e._components,(e=>[e._isHidden?1:0,e._isComplete?1:0,e._isCorrect?1:0])),t._blocks=s(e._blocks,(e=>[e._isHidden?1:0])),t._articles=s(e._articles,(e=>[e._isHidden?1:0])),t._contentObjects=s(e._contentObjects,(e=>[e._isHidden?1:0])),t._variables=s(e._variables,(e=>[e._value])),t._triggers=s(e._triggers,(e=>[!1===e._isEnabled?0:1])),r({},e,t)}return function(e){let t="";return o(e,(e=>{let i=n.NOT_COMPLETE;const s="question"===e._interactionType;e._isComplete?e._isComplete&&!s?i=n.COMPLETE:e._isComplete&&s&&!e._isCorrect?i=n.COMPLETE_NOT_CORRECT:e._isComplete&&s&&e._isCorrect&&(i=n.COMPLETE_CORRECT):i=n.NOT_COMPLETE,t+=i})),t}(e._components)}},12461:()=>{"use strict";var e={UTILS:{},debug:{isActive:!0},SCORM:{version:null,handleCompletionStatus:!0,handleExitMode:!0,API:{handle:null,isFound:!1},connection:{isActive:!1},data:{completionStatus:null,exitStatus:null},debug:{}}};e.SCORM.isAvailable=function(){return!0},e.SCORM.API.find=function(t){for(var i=null,s=0,r="SCORM.API.find",o=e.UTILS.trace,n=e.SCORM;!t.API&&!t.API_1484_11&&t.parent&&t.parent!=t&&s<=500;)s++,t=t.parent;if(n.version)switch(n.version){case"2004":t.API_1484_11?i=t.API_1484_11:o(r+": SCORM version 2004 was specified by user, but API_1484_11 cannot be found.");break;case"1.2":t.API?i=t.API:o(r+": SCORM version 1.2 was specified by user, but API cannot be found.")}else t.API_1484_11?(n.version="2004",i=t.API_1484_11):t.API&&(n.version="1.2",i=t.API);return i?(o(r+": API found. Version: "+n.version),o("API: "+i)):o(r+": Error finding API. \nFind attempts: "+s+". \nFind attempt limit: 500"),i},e.SCORM.API.get=function(){var t=null,i=window,s=e.SCORM,r=s.API.find,o=e.UTILS.trace;return!(t=r(i))&&i.parent&&i.parent!=i&&(t=r(i.parent)),!t&&i.top&&i.top.opener&&(t=r(i.top.opener)),!t&&i.top&&i.top.opener&&i.top.opener.document&&(t=r(i.top.opener.document)),t?s.API.isFound=!0:o("API.get failed: Can't find the API!"),t},e.SCORM.API.getHandle=function(){var t=e.SCORM.API;return t.handle||t.isFound||(t.handle=t.get()),t.handle},e.SCORM.connection.initialize=function(){var t=!1,i=e.SCORM,s=i.data.completionStatus,r=e.UTILS.trace,o=e.UTILS.StringToBoolean,n=i.debug,a="SCORM.connection.initialize ";if(r("connection.initialize called."),i.connection.isActive)r(a+"aborted: Connection already active.");else{var c=i.API.getHandle(),l=0;if(c){switch(i.version){case"1.2":t=o(c.LMSInitialize(""));break;case"2004":t=o(c.Initialize(""))}if(t)if(null!==(l=n.getCode())&&0===l){if(i.connection.isActive=!0,i.handleCompletionStatus&&(s=i.status("get"))){switch(s){case"not attempted":case"unknown":i.status("set","incomplete")}i.save()}}else t=!1,r(a+"failed. \nError code: "+l+" \nError info: "+n.getInfo(l));else r(null!==(l=n.getCode())&&0!==l?a+"failed. \nError code: "+l+" \nError info: "+n.getInfo(l):a+"failed: No response from server.")}else r(a+"failed: API is null.")}return t},e.SCORM.connection.terminate=function(){var t=!1,i=e.SCORM,s=i.data.exitStatus,r=i.data.completionStatus,o=e.UTILS.trace,n=e.UTILS.StringToBoolean,a=i.debug,c="SCORM.connection.terminate ";if(i.connection.isActive){var l=i.API.getHandle(),u=0;if(l){if(i.handleExitMode&&!s)if("completed"!==r&&"passed"!==r)switch(i.version){case"1.2":t=i.set("cmi.core.exit","suspend");break;case"2004":t=i.set("cmi.exit","suspend")}else switch(i.version){case"1.2":t=i.set("cmi.core.exit","logout");break;case"2004":t=i.set("cmi.exit","normal")}if(t=i.save()){switch(i.version){case"1.2":t=n(l.LMSFinish(""));break;case"2004":t=n(l.Terminate(""))}t?i.connection.isActive=!1:o(c+"failed. \nError code: "+(u=a.getCode())+" \nError info: "+a.getInfo(u))}}else o(c+"failed: API is null.")}else o(c+"aborted: Connection already terminated.");return t},e.SCORM.data.get=function(t){var i=null,s=e.SCORM,r=e.UTILS.trace,o=s.debug,n="SCORM.data.get('"+t+"') ";if(s.connection.isActive){var a=s.API.getHandle(),c=0;if(a){switch(s.version){case"1.2":i=a.LMSGetValue(t);break;case"2004":i=a.GetValue(t)}if(c=o.getCode(),""!==i||0===c)switch(t){case"cmi.core.lesson_status":case"cmi.completion_status":s.data.completionStatus=i;break;case"cmi.core.exit":case"cmi.exit":s.data.exitStatus=i}else r(n+"failed. \nError code: "+c+"\nError info: "+o.getInfo(c))}else r(n+"failed: API is null.")}else r(n+"failed: API connection is inactive.");return r(n+" value: "+i),String(i)},e.SCORM.data.set=function(t,i){var s=!1,r=e.SCORM,o=e.UTILS.trace,n=e.UTILS.StringToBoolean,a=r.debug,c="SCORM.data.set('"+t+"') ";if(r.connection.isActive){var l=r.API.getHandle(),u=0;if(l){switch(r.version){case"1.2":s=n(l.LMSSetValue(t,i));break;case"2004":s=n(l.SetValue(t,i))}s?"cmi.core.lesson_status"!==t&&"cmi.completion_status"!==t||(r.data.completionStatus=i):o(c+"failed. \nError code: "+(u=a.getCode())+". \nError info: "+a.getInfo(u))}else o(c+"failed: API is null.")}else o(c+"failed: API connection is inactive.");return o(c+" value: "+i),s},e.SCORM.data.save=function(){var t=!1,i=e.SCORM,s=e.UTILS.trace,r=e.UTILS.StringToBoolean,o="SCORM.data.save failed";if(i.connection.isActive){var n=i.API.getHandle();if(n)switch(i.version){case"1.2":t=r(n.LMSCommit(""));break;case"2004":t=r(n.Commit(""))}else s(o+": API is null.")}else s(o+": API connection is inactive.");return t},e.SCORM.status=function(t,i){var s=!1,r=e.SCORM,o=e.UTILS.trace,n="SCORM.getStatus failed",a="";if(null!==t){switch(r.version){case"1.2":a="cmi.core.lesson_status";break;case"2004":a="cmi.completion_status"}switch(t){case"get":s=r.data.get(a);break;case"set":null!==i?s=r.data.set(a,i):(s=!1,o(n+": status was not specified."));break;default:s=!1,o(n+": no valid action was specified.")}}else o(n+": action was not specified.");return s},e.SCORM.debug.getCode=function(){var t=e.SCORM,i=t.API.getHandle(),s=e.UTILS.trace,r=0;if(i)switch(t.version){case"1.2":r=parseInt(i.LMSGetLastError(),10);break;case"2004":r=parseInt(i.GetLastError(),10)}else s("SCORM.debug.getCode failed: API is null.");return r},e.SCORM.debug.getInfo=function(t){var i=e.SCORM,s=i.API.getHandle(),r=e.UTILS.trace,o="";if(s)switch(i.version){case"1.2":o=s.LMSGetErrorString(t.toString());break;case"2004":o=s.GetErrorString(t.toString())}else r("SCORM.debug.getInfo failed: API is null.");return String(o)},e.SCORM.debug.getDiagnosticInfo=function(t){var i=e.SCORM,s=i.API.getHandle(),r=e.UTILS.trace,o="";if(s)switch(i.version){case"1.2":o=s.LMSGetDiagnostic(t);break;case"2004":o=s.GetDiagnostic(t)}else r("SCORM.debug.getDiagnosticInfo failed: API is null.");return String(o)},e.SCORM.init=e.SCORM.connection.initialize,e.SCORM.get=e.SCORM.data.get,e.SCORM.set=e.SCORM.data.set,e.SCORM.save=e.SCORM.data.save,e.SCORM.quit=e.SCORM.connection.terminate,e.UTILS.StringToBoolean=function(e){switch(typeof e){case"object":case"string":return/(true|1)/i.test(e);case"number":return!!e;case"boolean":return e;case"undefined":return null;default:return!1}},e.UTILS.trace=function(t){e.debug.isActive&&window.console&&window.console.log&&window.console.log(t)},window.pipwerks=e},58158:e=>{"use strict";window.Logger=function(){this.logArr=new Array,this.registeredViews=new Array},Logger.instance=null,Logger.LOG_TYPE_INFO=0,Logger.LOG_TYPE_WARN=1,Logger.LOG_TYPE_ERROR=2,Logger.LOG_TYPE_DEBUG=3,Logger.getInstance=function(){return null==Logger.instance&&(Logger.instance=new Logger),Logger.instance},Logger.prototype.getEntries=function(){return this.logArr},Logger.prototype.getLastEntry=function(){return this.logArr[this.logArr.length-1]},Logger.prototype.info=function(e){this.logArr[this.logArr.length]={str:e,type:Logger.LOG_TYPE_INFO},this.updateViews()},Logger.prototype.warn=function(e){this.logArr[this.logArr.length]={str:e,type:Logger.LOG_TYPE_WARN},this.updateViews()},Logger.prototype.error=function(e){this.logArr[this.logArr.length]={str:e,type:Logger.LOG_TYPE_ERROR},this.updateViews()},Logger.prototype.debug=function(e){this.logArr[this.logArr.length]={str:e,type:Logger.LOG_TYPE_DEBUG},this.updateViews()},Logger.prototype.registerView=function(e){this.registeredViews[this.registeredViews.length]=e},Logger.prototype.unregisterView=function(e){for(var t=0;t<this.registeredViews.length;t++)this.registeredViews[t]==e&&(this.registeredViews.splice(t,1),t--)},Logger.prototype.updateViews=function(){for(var e=0;e<this.registeredViews.length;e++)this.registeredViews[e]&&this.registeredViews[e].update(this)},e.exports=Logger},16488:(e,t,i)=>{"use strict";const s=i(93493);i(58158),i(12461);var r=function(){this.setCompletedWhenFailed=!0,this.commitOnStatusChange=!0,this.disableInteractionTracking=!1,this.timedCommitFrequency=10,this.maxCommitRetries=5,this.commitRetryDelay=1e3,this.commitRetryPending=!1,this.commitRetries=0,this.lastCommitSuccessTime=null,this.timedCommitIntervalID=null,this.retryCommitTimeoutID=null,this.logOutputWin=null,this.startTime=null,this.endTime=null,this.lmsConnected=!1,this.finishCalled=!1,this.logger=Logger.getInstance(),this.scorm=pipwerks.SCORM,this.registeredViews=[],window.__debug&&this.showDebugWindow()};function o(e,t){return function(){return t.apply(e,arguments)}}r.instance=null,r.getInstance=function(){return null===r.instance&&(r.instance=new r),r.instance},r.prototype.getVersion=function(){return this.scorm.version},r.prototype.setVersion=function(e){this.scorm.version=e,this.scorm.handleExitMode=this.isSCORM2004()},r.prototype.registerView=function(e){this.registeredViews[this.registeredViews.length]=e},r.prototype.updateViews=function(){for(var e=0;e<this.registeredViews.length;e++)this.registeredViews[e].update(this)},r.prototype.initialize=function(){return this.lmsConnected=this.scorm.init(),this.scorm.handleCompletionStatus&&this.commitOnStatusChange&&this.isFirstSession()&&this.commit(),this.lmsConnected?(this.startTime=new Date,this.initTimedCommit()):this.handleError("Course could not connect to the LMS"),this.lmsConnected},r.prototype.isFirstSession=function(){return"ab-initio"===this.getValue(this.isSCORM2004()?"cmi.entry":"cmi.core.entry")},r.prototype.setIncomplete=function(){this.setValue(this.isSCORM2004()?"cmi.completion_status":"cmi.core.lesson_status","incomplete"),this.commitOnStatusChange&&this.commit()},r.prototype.setCompleted=function(){this.setValue(this.isSCORM2004()?"cmi.completion_status":"cmi.core.lesson_status","completed"),this.commitOnStatusChange&&this.commit()},r.prototype.setPassed=function(){this.isSCORM2004()?(this.setValue("cmi.completion_status","completed"),this.setValue("cmi.success_status","passed")):this.setValue("cmi.core.lesson_status","passed"),this.commitOnStatusChange&&this.commit()},r.prototype.setFailed=function(){this.isSCORM2004()?(this.setValue("cmi.success_status","failed"),this.setCompletedWhenFailed&&this.setValue("cmi.completion_status","completed")):this.setValue("cmi.core.lesson_status","failed"),this.commitOnStatusChange&&this.commit()},r.prototype.getStatus=function(){var e=this.getValue(this.isSCORM2004()?"cmi.completion_status":"cmi.core.lesson_status");switch(e.toLowerCase()){case"passed":case"completed":case"incomplete":case"failed":case"browsed":case"not attempted":case"not_attempted":case"unknown":return e;default:return this.handleError("ScormWrapper::getStatus: invalid lesson status '"+e+"' received from LMS"),null}},r.prototype.setStatus=function(e){switch(e.toLowerCase()){case"incomplete":this.setIncomplete();break;case"completed":this.setCompleted();break;case"passed":this.setPassed();break;case"failed":this.setFailed();break;default:this.handleError("ScormWrapper::setStatus: the status '"+e+"' is not supported.")}},r.prototype.getScore=function(){return this.getValue(this.isSCORM2004()?"cmi.score.raw":"cmi.core.score.raw")},r.prototype.setScore=function(e,t,i){this.isSCORM2004()?this.setValue("cmi.score.raw",e)&&this.setValue("cmi.score.min",t)&&this.setValue("cmi.score.max",i)&&this.setValue("cmi.score.scaled",e/100):(this.setValue("cmi.core.score.raw",e),this.isSupported("cmi.core.score.min")&&this.setValue("cmi.core.score.min",t),this.isSupported("cmi.core.score.max")&&this.setValue("cmi.core.score.max",i))},r.prototype.getLessonLocation=function(){return this.getValue(this.isSCORM2004()?"cmi.location":"cmi.core.lesson_location")},r.prototype.setLessonLocation=function(e){this.setValue(this.isSCORM2004()?"cmi.location":"cmi.core.lesson_location",e)},r.prototype.getSuspendData=function(){return this.getValue("cmi.suspend_data")},r.prototype.setSuspendData=function(e){this.setValue("cmi.suspend_data",e)},r.prototype.getStudentName=function(){return this.getValue(this.isSCORM2004()?"cmi.learner_name":"cmi.core.student_name")},r.prototype.commit=function(){if(this.logger.debug("ScormWrapper::commit"),this.lmsConnected)if(this.commitRetryPending)this.logger.debug("ScormWrapper::commit: skipping this commit call as one is already pending.");else if(this.scorm.save())this.commitRetries=0,this.lastCommitSuccessTime=new Date;else if(this.commitRetries<=this.maxCommitRetries&&!this.finishCalled)this.commitRetries++,this.initRetryCommit();else{var e=this.scorm.debug.getCode(),t="Course could not commit data to the LMS";t+="\nError "+e+": "+this.scorm.debug.getInfo(e),t+="\nLMS Error Info: "+this.scorm.debug.getDiagnosticInfo(e),this.handleError(t)}else this.handleError("Course is not connected to the LMS")},r.prototype.finish=function(e){this.logger.debug("ScormWrapper::finish"),this.lmsConnected&&!this.finishCalled?(this.finishCalled=!0,null!=this.timedCommitIntervalID&&window.clearInterval(this.timedCommitIntervalID),this.commitRetryPending&&(window.clearTimeout(this.retryCommitTimeoutID),this.commitRetryPending=!1),this.logOutputWin&&!this.logOutputWin.closed&&this.logOutputWin.close(),this.endTime=new Date,this.isSCORM2004()?(this.scorm.set("cmi.session_time",this.convertMilliSecondsToSCORM2004Time(this.endTime.getTime()-this.startTime.getTime())),this.scorm.set("cmi.exit","normal")):(this.scorm.set("cmi.core.session_time",this.convertMilliSecondsToSCORMTime(this.endTime.getTime()-this.startTime.getTime())),this.scorm.set("cmi.core.exit","auto"===e?"":e)),this.lmsConnected=!1,this.scorm.quit()||this.handleError("Course could not finish")):this.handleError("Course is not connected to the LMS")},r.prototype.recordInteraction=function(e,t,i,s,r){if(!0!==this.disableInteractionTracking)if(this.isSupported("cmi.interactions._count")){if("choice"===r){for(var o=new Array,n=t.split("#"),a=0;a<n.length;a++)o.push(new ResponseIdentifier(n[a],n[a]));this.recordMultipleChoiceInteraction(e,o,i,null,null,null,s,null)}else if("matching"===r){var c=new Array,l=t.split("#"),u=null;for(a=0;a<l.length;a++)u=l[a].split("."),c.push(new MatchingResponse(u[0],u[1]));this.recordMatchingInteraction(e,c,i,null,null,null,s,null)}}else this.logger.info("ScormWrapper::recordInteraction: cmi.interactions are not supported by this LMS...")},r.prototype.getValue=function(e){if(this.logger.debug("ScormWrapper::getValue: _property="+e),this.finishCalled)this.logger.debug("ScormWrapper::getValue: ignoring request as 'finish' has been called");else{if(this.lmsConnected){var t=this.scorm.get(e),i=this.scorm.debug.getCode(),s="";return 0!==i&&(403===i?this.logger.warn("ScormWrapper::getValue: data model element not initialized"):(s+="Course could not get "+e,s+="\nError Info: "+this.scorm.debug.getInfo(i),s+="\nLMS Error Info: "+this.scorm.debug.getDiagnosticInfo(i),this.handleError(s))),this.logger.debug("ScormWrapper::getValue: returning "+t),t+""}this.handleError("Course is not connected to the LMS")}},r.prototype.setValue=function(e,t){if(this.logger.debug("ScormWrapper::setValue: _property="+e+" _value="+t),this.finishCalled)this.logger.debug("ScormWrapper::setValue: ignoring request as 'finish' has been called");else{if(this.lmsConnected){var i=this.scorm.set(e,t),s=this.scorm.debug.getCode(),r="";return i||(0!==s?(r+="Course could not set "+e+" to "+t,r+="\nError Info: "+this.scorm.debug.getInfo(s),r+="\nLMS Error Info: "+this.scorm.debug.getDiagnosticInfo(s),this.handleError(r)):this.logger.warn("ScormWrapper::setValue: LMS reported that the 'set' call failed but then said there was no error!")),i}this.handleError("Course is not connected to the LMS")}},r.prototype.isSupported=function(e){if(this.logger.debug("ScormWrapper::isSupported: _property="+e),!this.finishCalled)return this.lmsConnected?(this.scorm.get(e),401!==this.scorm.debug.getCode()):(this.handleError("Course is not connected to the LMS"),!1);this.logger.debug("ScormWrapper::isSupported: ignoring request as 'finish' has been called")},r.prototype.initTimedCommit=function(){if(this.logger.debug("ScormWrapper::initTimedCommit"),this.timedCommitFrequency>0){var e=6e4*this.timedCommitFrequency;this.timedCommitIntervalID=window.setInterval(o(this,this.commit),e)}},r.prototype.initRetryCommit=function(){this.logger.debug("ScormWrapper::initRetryCommit"),this.commitRetryPending=!0,this.retryCommitTimeoutID=window.setTimeout(o(this,this.doRetryCommit),this.commitRetryDelay)},r.prototype.doRetryCommit=function(){this.logger.debug("ScormWrapper::doRetryCommit"),this.commitRetryPending=!1,this.commit()},r.prototype.handleError=function(e){console.log(this,r),this.suppressErrors||(this.logger.error(e),this.logOutputWin&&!this.logOutputWin.closed||!confirm("An error has occured:\n\n"+e+"\n\nPress 'OK' to view debug information to send to technical support.")||this.showDebugWindow())},r.prototype.createValidIdentifier=function(e){return e=this.trim(new String(e)),0===s(e.toLowerCase(),"urn:")&&(e=e.substr(4)),e.replace(/[^\w\-\(\)\+\.\:\=\@\;\$\_\!\*\'\%]/g,"_")},r.prototype.createResponseIdentifier=function(e,t){return e=1!=e.length||e.search(/\w/)<0?"":e.toLowerCase(),t=this.createValidIdentifier(t),new ResponseIdentifier(e,t)},r.prototype.recordInteraction12=function(e,t,i,s,r,o,n,a,c,l,u,d){var h,p,m,g;return""===(m=this.getValue("cmi.interactions._count"))&&(m=0),!0===i||"true"===i||"correct"===i?g="correct":!1===i||"false"===i||"wrong"===i?g="wrong":"unanticipated"===i?g="unanticipated":"neutral"===i&&(g="neutral"),h=(h=this.setValue("cmi.interactions."+m+".id",e))&&this.setValue("cmi.interactions."+m+".type",l),!1===(p=this.setValue("cmi.interactions."+m+".student_response",t))&&(p=this.setValue("cmi.interactions."+m+".student_response",u)),h=h&&p,null!=s&&""!==s&&(!1===(p=this.setValue("cmi.interactions."+m+".correct_responses.0.pattern",s))&&(p=this.setValue("cmi.interactions."+m+".correct_responses.0.pattern",d)),h=h&&p),null!=g&&""!==g&&(h=h&&this.setValue("cmi.interactions."+m+".result",g)),null!=o&&""!==o&&(h=h&&this.setValue("cmi.interactions."+m+".weighting",o)),null!=n&&""!==n&&(h=h&&this.setValue("cmi.interactions."+m+".latency",this.convertMilliSecondsToSCORMTime(n))),null!=a&&""!==a&&(h=h&&this.setValue("cmi.interactions."+m+".objectives.0.id",a)),h&&this.setValue("cmi.interactions."+m+".time",this.convertDateToCMITime(c))},r.prototype.recordInteraction2004=function(e,t,i,s,r,o,n,a,c,l){var u,d,h;return i=new String(i),""===(d=this.getValue("cmi.interactions._count"))&&(d=0),h=!0===i||"true"===i||"correct"===i?"correct":!1===i||"false"==i||"wrong"===i?"incorrect":"unanticipated"===i?"unanticipated":"neutral"===i?"neutral":"",e=this.createValidIdentifier(e),u=(u=(u=this.setValue("cmi.interactions."+d+".id",e))&&this.setValue("cmi.interactions."+d+".type",l))&&this.setValue("cmi.interactions."+d+".learner_response",t),null!=h&&null!=h&&""!=h&&(u=u&&this.setValue("cmi.interactions."+d+".result",h)),null!=s&&null!=s&&""!=s&&(u=u&&this.setValue("cmi.interactions."+d+".correct_responses.0.pattern",s)),null!=r&&null!=r&&""!=r&&(u=u&&this.setValue("cmi.interactions."+d+".description",r)),null!=o&&null!=o&&""!=o&&(u=u&&this.setValue("cmi.interactions."+d+".weighting",o)),null!=n&&null!=n&&""!=n&&(u=u&&this.setValue("cmi.interactions."+d+".latency",this.convertMilliSecondsToSCORM2004Time(n))),null!=a&&null!=a&&""!=a&&(u=u&&this.setValue("cmi.interactions."+d+".objectives.0.id",a)),u&&this.setValue("cmi.interactions."+d+".timestamp",this.convertDateToISO8601Timestamp(c))},r.prototype.recordMultipleChoiceInteraction=function(e,t,i,s,r,o,n,a){var c=null,l=null;if(t.constructor==String)c=new Array(this.createResponseIdentifier(t,t));else if(t.constructor==ResponseIdentifier)c=new Array(t);else if(t.constructor==Array||t.constructor.toString().search("Array")>0)c=t;else{if(!(window.console&&"(Internal Function)"==t.constructor.toString()&&t.length>0))return this.handleError("ScormWrapper::recordMultipleChoiceInteraction: response is not in the correct format"),!1;c=t}if(null!=s&&null!=s&&""!=s)if(s.constructor==String)l=new Array(this.createResponseIdentifier(s,s));else if(s.constructor==ResponseIdentifier)l=new Array(s);else if(s.constructor==Array||s.constructor.toString().search("Array")>0)l=s;else{if(!(window.console&&"(Internal Function)"==s.constructor.toString()&&s.length>0))return this.handleError("ScormWrapper::recordMultipleChoiceInteraction: correct response is not in the correct format"),!1;l=s}else l=new Array;for(var u=new Date,d="",h="",p="",m="",g=0;g<c.length;g++)d.length>0&&(d+=this.isSCORM2004()?"[,]":","),h.length>0&&(h+=","),d+=this.isSCORM2004()?c[g].Long:c[g].Short,h+=c[g].Long;for(g=0;g<l.length;g++)p.length>0&&(p+=this.isSCORM2004()?"[,]":","),m.length>0&&(m+=","),p+=this.isSCORM2004()?l[g].Long:l[g].Short,m+=l[g].Long;return this.isSCORM2004()?this.recordInteraction2004(e,d,i,p,r,o,n,a,u,"choice"):this.recordInteraction12(e,h,i,m,r,o,n,a,u,"choice",d,p)},r.prototype.recordMatchingInteraction=function(e,t,i,s,r,o,n,a){var c=null,l=null;if(t.constructor==MatchingResponse)c=new Array(t);else if(t.constructor==Array||t.constructor.toString().search("Array")>0)c=t;else{if(!(window.console&&"(Internal Function)"==t.constructor.toString()&&t.length>0))return this.handleError("ScormWrapper::recordMatchingInteraction: response is not in the correct format"),!1;c=t}if(null!=s&&null!=s)if(s.constructor==MatchingResponse)l=new Array(s);else if(s.constructor==Array||s.constructor.toString().search("Array")>0)l=s;else{if(!(window.console&&"(Internal Function)"==s.constructor.toString()&&s.length>0))return this.handleError("ScormWrapper::recordMatchingInteraction: correct response is not in the correct format"),!1;l=s}else l=new Array;for(var u=new Date,d="",h="",p="",m="",g=0;g<c.length;g++)d.length>0&&(d+=","),h.length>0&&(h+=this.isSCORM2004()?"[,]":","),d+=c[g].Source.Short+"."+c[g].Target.Short,h+=c[g].Source.Long+(this.isSCORM2004()?"[.]":".")+c[g].Target.Long;for(g=0;g<l.length;g++)p.length>0&&(p+=","),m.length>0&&(m+=this.isSCORM2004()?"[,]":","),p+=l[g].Source.Short+"."+l[g].Target.Short,m+=l[g].Source.Long+(this.isSCORM2004()?"[.]":".")+l[g].Target.Long;return this.isSCORM2004()?this.recordInteraction2004(e,h,i,m,r,o,n,a,u,"matching"):this.recordInteraction12(e,h,i,m,r,o,n,a,u,"matching",d,p)},r.prototype.showDebugWindow=function(){this.logOutputWin&&!this.logOutputWin.closed&&this.logOutputWin.close(),this.logOutputWin=window.open("log_output.html","Log","width=600,height=300,status=no,scrollbars=yes,resize=yes,menubar=yes,toolbar=yes,location=yes,top=0,left=0"),this.logOutputWin&&this.logOutputWin.focus()},r.prototype.convertMilliSecondsToSCORMTime=function(e){var t,i,s,r,o,n;return 1e4==(t=(e-(r=e%1e3)-1e3*(s=(e-r)/1e3%60)-6e4*(i=(e-r-1e3*s)/6e4%60))/36e5)&&(100==(i=(e-36e5*(t=9999))/6e4)&&(i=99),100==(s=(e-36e5*t-6e4*(i=Math.floor(i)))/1e3)&&(s=99),r=e-36e5*t-6e4*i-1e3*(s=Math.floor(s))),o=Math.floor(r/10),n=this.zeroPad(t,4)+":"+this.zeroPad(i,2)+":"+this.zeroPad(s,2),n+="."+o,t>9999&&(n="9999:99:99",n+=".99"),n},r.prototype.convertDateToCMITime=function(e){var t,i,s,r=new Date(e);return t=r.getHours(),i=r.getMinutes(),s=r.getSeconds(),this.zeroPad(t,2)+":"+this.zeroPad(i,2)+":"+this.zeroPad(s,2)},r.prototype.convertMilliSecondsToSCORM2004Time=function(e){var t,i,s,r,o,n,a,c="",l=36e4,u=864e4,d=26298e4,h=315576e4;return t=Math.floor(e/10),t-=(a=Math.floor(t/h))*h,t-=(n=Math.floor(t/d))*d,t-=(o=Math.floor(t/u))*u,t-=(r=Math.floor(t/l))*l,t-=6e3*(s=Math.floor(t/6e3)),a>0&&(c+=a+"Y"),n>0&&(c+=n+"M"),o>0&&(c+=o+"D"),(t-=100*(i=Math.floor(t/100)))+i+s+r>0&&(c+="T",r>0&&(c+=r+"H"),s>0&&(c+=s+"M"),t+i>0&&(c+=i,t>0&&(c+="."+t),c+="S")),""===c&&(c="0S"),"P"+c},r.prototype.convertDateToISO8601Timestamp=function(e){var t=new Date(e),i=t.getFullYear(),s=t.getMonth()+1,r=t.getDate(),o=t.getHours(),n=t.getMinutes(),a=t.getSeconds();return i+"-"+(s=this.zeroPad(s,2))+"-"+(r=this.zeroPad(r,2))+"T"+(o=this.zeroPad(o,2))+":"+(n=this.zeroPad(n,2))+":"+this.zeroPad(a,2)},r.prototype.zeroPad=function(e,t){var i,s,r;if((s=(i=new String(e)).length)>t)i=i.substr(0,t);else for(r=s;r<t;r++)i="0"+i;return i},r.prototype.trim=function(e){return e.replace(/^\s*|\s*$/g,"")},r.prototype.isSCORM2004=function(){return"2004"===this.scorm.version},e.exports=r},51618:(e,t,i)=>{"use strict";const s=i(60019),{FETCH_COURSE_DATA:r}=i(63444),{SCORM_WRAPPER_CHANGE:o}=i(82077),n={_isEnabled:!1,_scormVersion:"1.2",_shouldUsePopup:!1,_shouldUseScrollFix:!1,_shouldShowScormErrors:!1,_useAdvancedTracking:!1,_shouldSendScore:!0,_reporting:{_onTrackingCriteriaMet:"passed",_onAssessmentFailure:"failed"},_cmiExitState:"auto",hasWrapperInitialised:!1,hasSCOFinished:!1,suspendData:{}};e.exports=(e=n,t)=>{if(t.type===r){const i=t.payload.config._scorm;return i&&i._isEnabled?s({},e,i):n}return e._isEnabled?t.type===o?s({},e,t.payload):e:n}},56066:(e,t,i)=>{"use strict";const{registerReducer:s,registerEpics:r}=i(90876),o=i(51618),{scormDataReadyEpic:n,scormWrapperInitEpic:a,scormDeserialiseEpic:c,scormTrackerChangeEpic:l,scormFinishEpic:u,scormErrorEpic:d}=i(92657);s("scorm",o),r(n,a,c,l,u,d)},74854:()=>{},66602:()=>{}}]);