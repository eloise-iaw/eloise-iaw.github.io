"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7684],{36227:(e,t)=>{t.SURVEY_RATING_SELECTED="SURVEY_RATING_SELECTED",t.SURVEY_OPTION_SELECTED="SURVEY_OPTION_SELECTED",t.SURVEY_FIELD_UPDATE="SURVEY_FIELD_UPDATE",t.onSurveyRatingSelected=e=>({type:t.SURVEY_RATING_SELECTED,payload:e}),t.onSurveyOptionSelected=e=>({type:t.SURVEY_OPTION_SELECTED,payload:e}),t.onSurveyFieldUpdate=e=>({type:t.SURVEY_FIELD_UPDATE,payload:e})},94867:(e,t,s)=>{const o=s(58335),i=s(13980),n=s(2784),r=s(72779),a=s(23346),{Component:l}=s(58720),d=s(84221),p=s(27843),c=s(96235),u=s(88934),m=s(43855),y=s(88951),_=s(96622),v=s(30275),S=s(7310),h=o({displayName:"Survey",propTypes:{component:i.object.isRequired,setComponentAsReady:i.func.isRequired,setComponentAsViewed:i.func.isRequired,setComponentAsStarted:i.func.isRequired,setComponentAsComplete:i.func.isRequired,onSurveyRatingSelected:i.func.isRequired,onSurveyOptionSelected:i.func.isRequired,onSurveyFieldUpdate:i.func.isRequired,buttons:i.object.isRequired,theme:i.object.isRequired,styles:i.any,showPrompt:i.func.isRequired},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},onVisibilityChange(...e){m(...e,this,this.props.setComponentAsViewed)},showDialog(e){(e.title||e.body)&&this.props.showPrompt({title:e.title,body:e.body,_dismiss:{text:e.closeButtonText}})},onSurveyStarted(){const{component:e,setComponentAsStarted:t}=this.props;e._hasStarted||t(e._id)},onSurveyRatingSelected(e){const{component:t,onSurveyRatingSelected:s}=this.props;s({componentId:t._id,rating:e}),this.onSurveyStarted()},onSurveyOptionSelected(e,t){const{component:s,onSurveyOptionSelected:o}=this.props;o({componentId:s._id,optionId:e,isSelected:t}),this.onSurveyStarted()},onSurveyFieldUpdate(e,t){const{component:s,onSurveyFieldUpdate:o}=this.props;o({componentId:s._id,fieldId:e,value:t}),this.onSurveyStarted()},onSubmitClicked(){const{component:e,setComponentAsComplete:t}=this.props,{_isRatingsEnabled:s,_rating:o,_dialogs:i}=e;if(s&&0===o)return this.showDialog(i._noRatingDialog);t(e._id),this.showDialog(i._successDialog)},renderSurveyRatings(){const{component:e}=this.props;if(e._isRatingsEnabled)return n.createElement(_,{rating:e._rating,ratings:e._ratings,starColor:e._starColor,starSelectedColor:e._starSelectedColor,onSurveyRatingSelected:this.onSurveyRatingSelected,swatches:this.props.theme._swatches,isDisabled:e._isComplete})},renderSurveyOptions(){const{_id:e,_options:t,_isComplete:s}=this.props.component;if(t.length)return n.createElement(v,{componentId:e,options:t,onSurveyOptionSelected:this.onSurveyOptionSelected,isDisabled:s})},renderSurveyFields(){const{_id:e,_fields:t,_isComplete:s}=this.props.component;if(t.length)return n.createElement(S,{componentId:e,fields:t,onSurveyFieldUpdate:this.onSurveyFieldUpdate,isDisabled:s})},renderSurveyComplete(){const{component:e}=this.props;if(!e._isComplete)return;const{text:t,_icon:s}=e._completeState;return t||s?n.createElement(y,{text:t,icon:s}):void 0},renderButtons(){const{buttons:e,component:t}=this.props,s=p(this.props);return n.createElement("div",{className:d(s)},n.createElement("div",{className:"ev-buttons-cluster-bottom ev-clearfix"},n.createElement(a,{className:r("ev-buttons-action ev-survey-submit",{"ev-disabled":t._isComplete}),text:t.surveySubmitButtonText,onClick:this.onSubmitClicked,"aria-label":e._submit.ariaLabel,isDisabled:t._isComplete})))},render(){const{props:e}=this;return n.createElement(l,{component:e.component,styles:e.styles,isVisibilitySensorActive:u(e),onVisibilityChange:this.onVisibilityChange},n.createElement("div",{className:c(e.component)},n.createElement("div",{className:"ev-survey-form"},this.renderSurveyRatings(),this.renderSurveyOptions(),this.renderSurveyFields()),this.renderButtons(),this.renderSurveyComplete()))}});e.exports=h},88951:(e,t,s)=>{const o=s(2784),i=s(13980),n=s(50085),r=s(72779),a=({icon:e,text:t})=>o.createElement("div",{className:"ev-label ev-survey-complete",role:"status"},e&&o.createElement(n,{className:r({"ev-has-label":t}),icon:e,style:{color:"inherit"}}),t);a.propTypes={icon:i.string,text:i.string},e.exports=a},7310:(e,t,s)=>{const o=s(16760),i=s(2784),n=s(13980),r=s(41119),a=({fields:e,componentId:t,onSurveyFieldUpdate:s,isDisabled:n})=>i.createElement("div",{className:"ev-survey-fields"},o(e,(({_id:e,_userAnswer:o="",labelText:a,placeholderText:l})=>i.createElement("div",{className:"ev-survey-field",key:e},i.createElement(r,{id:`${t}-${e}`,value:o,label:a,onChange:t=>s(e,t),placeholder:l,isDisabled:n})))));a.propTypes={componentId:n.string.isRequired,fields:n.array.isRequired,onSurveyFieldUpdate:n.func.isRequired,isDisabled:n.bool.isRequired},a.defaultProps={fields:[],isDisabled:!1},e.exports=a},30275:(e,t,s)=>{const o=s(16760),i=s(2784),n=s(72779),r=s(13980),a=s(28739),l=({componentId:e,options:t,onSurveyOptionSelected:s,isDisabled:r})=>i.createElement("div",{className:"ev-survey-options"},o(t,(({_id:t,text:o,_isSelected:l=!1})=>i.createElement(i.Fragment,{key:t},i.createElement("input",{id:`${e}-${t}`,value:t,type:"checkbox",checked:l,disabled:r,onChange:()=>s(t,!l),onKeyPress:e=>{a.isEnterKey(e)&&s(t,!l)}}),i.createElement("label",{className:n("ev-survey-option-label",{"ev-selected":l,"ev-disabled":r}),htmlFor:`${e}-${t}`},o)))));l.propTypes={componentId:r.string.isRequired,options:r.array,isDisabled:r.bool,onSurveyOptionSelected:r.func.isRequired},l.defaultProps={options:[],isDisabled:!1},e.exports=l},96622:(e,t,s)=>{const o=s(16760),i=s(58335),n=s(2784),r=s(13980),a=s(60309),l=s(50085),d=["one","two","three","four","five"],p=i({displayName:"SurveyRating",propTypes:{rating:r.number.isRequired,ratings:r.object.isRequired,onSurveyRatingSelected:r.func.isRequired,starColor:r.string.isRequired,starSelectedColor:r.string.isRequired,swatches:r.object.isRequired,isDisabled:r.bool},getDefaultProps:()=>({rating:0,isDisabled:!1}),getInitialState:()=>({_isHoverMode:!1,_hoverRating:1}),onItemHover(e,t=1){this.setState({_isHoverMode:e,_hoverRating:t})},renderItems(){const{rating:e,ratings:t,onSurveyRatingSelected:s,starColor:i,starSelectedColor:r,swatches:p,isDisabled:c}=this.props,{_isHoverMode:u,_hoverRating:m}=this.state,y=a(i,p),_=a(r,p);return o(d,((o,i)=>{const r=i+1,a=u?r<=m:r<=e;return n.createElement("button",{key:i,className:"ev-survey-rating-star",onClick:e=>{e.preventDefault(),s(r)},onMouseEnter:()=>this.onItemHover(!0,r),onMouseLeave:()=>this.onItemHover(!1),"aria-label":t[o],"aria-pressed":a,"aria-disabled":c,style:{pointerEvents:c?"none":"all"}},n.createElement(l,{icon:a?"star":"star-empty",style:{color:a?_:y}}))}))},renderLabel(){const{rating:e,ratings:t}=this.props,{_isHoverMode:s,_hoverRating:o}=this.state,i=t[d[(s?o:e)-1]];if(i)return n.createElement("span",{className:"ev-label"},i)},render(){return n.createElement("div",{className:"ev-survey-ratings"},this.renderItems(),this.renderLabel())}});e.exports=p},65432:(e,t,s)=>{const o=s(63867);e.exports=(e,t)=>({buttons:e.course._buttons,articleStyle:o(e,t,"article")._classes})},88523:(e,t,s)=>{const o=s(16760),{SETUP_COMPONENT:i}=s(29933),{SURVEY_RATING_SELECTED:n,SURVEY_OPTION_SELECTED:r,SURVEY_FIELD_UPDATE:a}=s(36227);e.exports=(e,t)=>{switch(t.type){case i:return e._isComplete?e:{...e,_rating:0,_options:o(e._options,(e=>({...e,_isSelected:!1}))),_fields:o(e._fields,(e=>({...e,_userAnswer:""})))};case n:return{...e,_rating:t.payload.rating};case r:return{...e,_options:o(e._options,(e=>e._id===t.payload.optionId?{...e,_isSelected:t.payload.isSelected}:e))};case a:return{...e,_fields:o(e._fields,(e=>e._id===t.payload.fieldId?{...e,_userAnswer:t.payload.value}:e))};default:return e}}},38340:(e,t,s)=>{const{registerComponent:o}=s(90876),i=s(94867),n=s(65432),r=s(43724),a=s(88523),{onSurveyRatingSelected:l,onSurveyOptionSelected:d,onSurveyFieldUpdate:p}=s(36227);o("survey",{component:i,actions:{onSurveyRatingSelected:l,onSurveyOptionSelected:d,onSurveyFieldUpdate:p},reducer:a,mapStateToProps:n,trackingMap:r})},43724:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_rating:{fieldKey:"_rating",type:"Number",shouldRestore:!0},_options:{fieldKey:"_options",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String",shouldRestore:!1},_isSelected:{fieldKey:"_isSelected",type:"Boolean",shouldRestore:!0},text:{fieldKey:"text",type:"String",shouldRestore:!1},name:{fieldKey:"name",type:"String",shouldRestore:!1}}},_fields:{fieldKey:"_fields",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String",shouldRestore:!1},_userAnswer:{fieldKey:"_userAnswer",type:"String",shouldRestore:!0},name:{fieldKey:"name",type:"String",shouldRestore:!1}}},_items:{fieldKey:"_items",type:"Function",shouldRestore:!1,mapCallback:function(e,t){const s=[],{_fields:o,_options:i}=t;return Array.isArray(o)&&o.forEach((e=>{s.push({_id:e.name||"field",text:e.labelText,value:e._userAnswer||""})})),Array.isArray(i)&&i.forEach((e=>{s.push({_id:e.name||"option",text:e.text,_isSelected:!!e._isSelected})})),s}},_score:{fieldKey:"_score",type:"Function",shouldRestore:!1,mapCallback:function(e,t){return t._rating}}}},41119:(e,t,s)=>{const o=s(58335),i=s(13980),n=s(2784),r=s(72779),a=o({displayName:"TextArea",propTypes:{id:i.string,value:i.string.isRequired,label:i.string,onChange:i.func.isRequired,onFocus:i.func,onBlur:i.func,className:i.string,placeholder:i.string,minHeight:i.number,ariaLabel:i.string,isDisabled:i.bool,shouldFocus:i.bool},getDefaultProps:()=>({value:""}),componentDidUpdate(e){const{shouldFocus:t}=this.props;t&&!e.shouldFocus&&this._textArea.focus()},renderTextArea(){const{props:e}=this;return n.createElement("textarea",{id:e.id,ref:e=>this._textArea=e,"aria-label":e.ariaLabel,value:e.value,onChange:t=>e.onChange(t.target.value),onFocus:e.onFocus,onBlur:e.onBlur,placeholder:e.placeholder,className:r("ev-text-area",e.className),style:{minHeight:e.minHeight},disabled:e.isDisabled})},render(){const{props:e}=this;return e.label?n.createElement(n.Fragment,null,n.createElement("label",{className:"ev-label",htmlFor:e.id,dangerouslySetInnerHTML:{__html:e.label},style:{pointerEvents:e.isDisabled?"none":"all"}}),this.renderTextArea()):this.renderTextArea()}});e.exports=a},88934:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:s,isPageReady:o}=e;return!0===o&&!0===s._isReady&&!0!==s[t]}},96235:(e,t,s)=>{const o=s(72779);e.exports=function(e){return o(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},43855:e=>{e.exports=function(e,t,s,o,i){o&&o.props&&o.props.component?(t.top&&(o.isInviewTop=!0),t.bottom&&(o.isInviewBottom=!0),o.isInviewTop&&o.isInviewBottom&&i&&i(o.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);