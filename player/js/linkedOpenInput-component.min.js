"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7399],{98762:(e,t)=>{t.LINKEDOPENINPUT_SAVE_USER_ANSWER="LINKEDOPENINPUT_SAVE_USER_ANSWER",t.saveUserAnswer=e=>({type:t.LINKEDOPENINPUT_SAVE_USER_ANSWER,payload:e})},32591:(e,t,s)=>{var n=s(14859)(s(58527));const i=s(98923),r=s(16760),o=s(58335),a=s(13980),p=s(2784),l=s(72779),{Component:d}=s(58720),c=s(23346),u=s(41119),m=s(27843),h=s(96235),v=s(88934),_=s(43855),A=s(60309),k=s(57852),b=s(11248),w=o({displayName:"LinkedOpenInput",propTypes:{component:a.object.isRequired,setComponentAsReady:a.func.isRequired,setComponentAsViewed:a.func.isRequired,setComponentAsComplete:a.func.isRequired,showFeedback:a.func.isRequired,saveUserAnswer:a.func.isRequired,setAriaLive:a.func.isRequired,isLinkedOpenInputsComplete:a.bool,theme:a.object.isRequired,styles:a.object},getInitialState(){return{_userAnswer:this.props.component._userAnswer||"",_showSavedModal:!1}},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},componentDidUpdate(e){const{component:t}=this.props;!e.component._isSubmitted&&t._isSubmitted&&(t._userAnswer&&this.showFeedback(),this.showSavedModal())},saveUserAnswer(e){const{props:t}=this;t.saveUserAnswer({componentId:t.component._id,userAnswer:e}),t.component._isSubmitted&&(e&&this.showFeedback(),this.showSavedModal())},showFeedback(){const{component:e}=this.props;if(!e._canShowFeedback)return;const t={feedbackTitle:e._shouldShowDisplayTitleInFeedback?e.displayTitle:null,feedbackMessage:e.feedbackMessage,feedbackGraphic:e.feedbackGraphic};this.props.showFeedback(t)},showSavedModal(){this.setState({_showSavedModal:!0}),i((()=>{this.setState({_showSavedModal:!1})}),1e3)},onTextAreaChange(e){this.setState({_userAnswer:e})},onSaveClicked(){const{component:e,setAriaLive:t,setComponentAsComplete:s}=this.props;this.saveUserAnswer(this.state._userAnswer),t({message:e.savedAriaLiveMessage,isAssertive:!0}),s(e._id,{_isSubmitted:!0})},onClearClicked(){this.setState({_userAnswer:""},(()=>this.saveUserAnswer("")));const{component:e,setAriaLive:t}=this.props;t({message:e.clearedAriaLiveMessage,isAssertive:!0})},onVisibilityChange(...e){_(...e,this,this.props.setComponentAsViewed)},getTextAreaMinHeight(){return this.props.component._hasMinimumHeight?this.props.component._minimumHeight:300},getLinkedUserAnswerStyle(){const{component:e,theme:t}=this.props,s={},n=e._linkedOpenInputAnswerBackgroundColor,i=e._linkedOpenInputAnswerTextColor;return n&&"transparent"!==n&&(s.backgroundColor=A(n,t._swatches)),i&&"transparent"!==i&&(s.color=A(i,t._swatches)),s},renderIncomplete(){if(!this.props.isLinkedOpenInputsComplete)return p.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete"},r(this.props.component._items,(e=>p.createElement(b,(0,n.default)({key:e._id},e)))))},renderOpenInputAnswers(){const{component:e}=this.props,t=this.getLinkedUserAnswerStyle();return r(e._items,(e=>p.createElement(k,(0,n.default)({key:e._id,style:t},e))))},renderTextArea(){if(this.props.isLinkedOpenInputsComplete)return p.createElement(u,{ariaLabel:this.props.component.textAreaAriaLabel,value:this.state._userAnswer,onChange:this.onTextAreaChange,placeholder:this.props.component.placeholder,minHeight:this.getTextAreaMinHeight()})},getIsSaveDisabled(){const{component:e}=this.props,{_userAnswer:t}=this.state;return""===t&&!e._userAnswer||t===e._userAnswer},renderButtons(){if(!this.props.isLinkedOpenInputsComplete)return;const{_isActionButtonOnRight:e}=m(this.props);return p.createElement("div",{className:l("ev-buttons",{"ev-switch-buttons":e})},p.createElement(c,{className:"ev-button-save",text:this.props.component._saveButton,isDisabled:this.getIsSaveDisabled(),onClick:this.onSaveClicked}),p.createElement(c,{className:"ev-button-clear",text:this.props.component._clearButton,isDisabled:""===this.state._userAnswer,onClick:this.onClearClicked}))},renderSaveModal(){return p.createElement("div",{className:l("ev-linkedOpenInput-save-modal",{"ev-is-visible":this.state._showSavedModal})},p.createElement("div",{className:"ev-linkedOpenInput-save-modal-inner"},p.createElement("span",{className:"ev-save-success-message"},this.props.component._saveSuccessMessage)))},render(){const{props:e}=this;return p.createElement(d,{component:e.component,styles:e.styles,isVisibilitySensorActive:v(e),onVisibilityChange:this.onVisibilityChange},p.createElement("div",null,p.createElement("div",{className:h(e.component)},this.renderIncomplete(),this.renderOpenInputAnswers(),this.renderTextArea(),this.renderSaveModal()),this.renderButtons()))}});e.exports=w},57852:(e,t,s)=>{const n=s(2784),{connect:i}=s(57903),r=s(13980),o=s(58014),a=e=>e.isLinkedOpenInputComplete?n.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer-container"},n.createElement("div",{className:"ev-label"},e._linkedAnswerLabelText),n.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer",style:e.style},n.createElement("div",{className:"ev-linkedOpenInput-linkedUserAnswer-inner"},e.linkedOpenInputUserAnswer))):null;a.propTypes={isLinkedOpenInputComplete:r.bool.isRequired,linkedOpenInputUserAnswer:r.string,_linkedAnswerLabelText:r.string,style:r.object},e.exports=i(((e,t)=>{const s=t._linkedOpenInputId?o(t._linkedOpenInputId):{};return{isLinkedOpenInputComplete:s._isComplete||!1,linkedOpenInputUserAnswer:s._userAnswer}}))(a)},11248:(e,t,s)=>{const n=s(2784),{connect:i}=s(57903),r=s(13980),o=s(36998),a=s(58014),p=s(23346),l=e=>e.isLinkedOpenInputComplete?null:n.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete-message"},n.createElement("div",{className:"ev-linkedOpenInput-linked-incomplete-message-inner ev-label"},e._linkedIncompleteMessage),n.createElement(p,{className:"ev-linkedOpenInput-navigate-linked",text:e._navigateToLinkedButtonText,onClick:()=>o(e._linkedOpenInputId)}));l.propTypes={isLinkedOpenInputComplete:r.bool.isRequired,_linkedOpenInputId:r.string,_navigateToLinkedButtonText:r.string,_linkedIncompleteMessage:r.string},e.exports=i(((e,t)=>({isLinkedOpenInputComplete:(t._linkedOpenInputId?a(t._linkedOpenInputId):{})._isComplete||!1})))(l)},67213:(e,t,s)=>{const{registerComponent:n}=s(90876),i=s(32591),r=s(59046),{saveUserAnswer:o}=s(98762);n("linkedOpenInput",{component:i,actions:{saveUserAnswer:o},reducer:r,mapStateToProps:s(61405),trackingMap:s(33140)})},61405:(e,t,s)=>{const n=s(92191),i=s(55281),r=s(57471),o=s(63867);e.exports=(e,t)=>{let s=t._isAlwaysEnabled;if(!s){const o=n(t._items).map((e=>e._linkedOpenInputId)).compact().value(),a=r(o,e);s=void 0===i(a,(e=>!0!==e._isComplete))}return{isLinkedOpenInputsComplete:s,articleStyle:o(e,t,"article")._classes}}},59046:(e,t,s)=>{const n=s(78871),{LINKEDOPENINPUT_SAVE_USER_ANSWER:i}=s(98762);e.exports=function(e,t){return t.type===i?{...e,_userAnswer:t.payload.userAnswer,_isSubmitted:!0,_isCorrect:!0,_correctAt:n()}:e}},33140:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_userAnswer:{fieldKey:"_userAnswer",type:"String",shouldRestore:!0}}},41119:(e,t,s)=>{const n=s(58335),i=s(13980),r=s(2784),o=s(72779),a=n({displayName:"TextArea",propTypes:{id:i.string,value:i.string.isRequired,label:i.string,onChange:i.func.isRequired,onFocus:i.func,onBlur:i.func,className:i.string,placeholder:i.string,minHeight:i.number,ariaLabel:i.string,isDisabled:i.bool,shouldFocus:i.bool},getDefaultProps:()=>({value:""}),componentDidUpdate(e){const{shouldFocus:t}=this.props;t&&!e.shouldFocus&&this._textArea.focus()},renderTextArea(){const{props:e}=this;return r.createElement("textarea",{id:e.id,ref:e=>this._textArea=e,"aria-label":e.ariaLabel,value:e.value,onChange:t=>e.onChange(t.target.value),onFocus:e.onFocus,onBlur:e.onBlur,placeholder:e.placeholder,className:o("ev-text-area",e.className),style:{minHeight:e.minHeight},disabled:e.isDisabled})},render(){const{props:e}=this;return e.label?r.createElement(r.Fragment,null,r.createElement("label",{className:"ev-label",htmlFor:e.id,dangerouslySetInnerHTML:{__html:e.label},style:{pointerEvents:e.isDisabled?"none":"all"}}),this.renderTextArea()):this.renderTextArea()}});e.exports=a},88934:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:s,isPageReady:n}=e;return!0===n&&!0===s._isReady&&!0!==s[t]}},96235:(e,t,s)=>{const n=s(72779);e.exports=function(e){return n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},43855:e=>{e.exports=function(e,t,s,n,i){n&&n.props&&n.props.component?(t.top&&(n.isInviewTop=!0),t.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&i&&i(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);