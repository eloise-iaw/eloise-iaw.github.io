(self.webpackChunk=self.webpackChunk||[]).push([[799],{19017:e=>{"use strict";e.exports=function(e){var t;const n=e.displayTitle,i=null!==(t=e._heroImage)&&void 0!==t&&t._isEnabled?e._heroImage.title:null;return n||i}},93976:(e,t,n)=>{"use strict";const i=n(72579),s=n(16760),o=n(51525),r=n(58335),a=n(13980),l=n(2784),{connect:m}=n(57903),c=n(72779),u=n(34577),{addPrompt:p}=n(44437),{setAriaLive:d}=n(28543),h=n(86587),g=n(57992),v=n(65319),I=n(45390),M=n(14755),f=n(81895),_=n(67963),b=n(10052),y=n(84746),C=n(76434),E=r({displayName:"MapMenu",propTypes:{menu:a.object.isRequired,device:a.object.isRequired,theme:a.object.isRequired,itemIds:a.array.isRequired,course:a.object.isRequired,addPrompt:a.func.isRequired,setAriaLive:a.func.isRequired,hasActionBar:a.bool.isRequired,classList:a.array},getInitialState(){return this.getDefaultState()},getDefaultState:()=>({_isDragging:!1,_isShowingInfo:!1,_selectedItemId:null}),componentDidMount(){const{props:e}=this;e.menu.ariaLabel&&e.setAriaLive({message:e.menu.ariaLabel,delay:200}),this.checkMapMenuImage(),this.checkMapMenuPointerImages()},checkMapMenuImage(){this.props.menu._mapMenu._mapImage||this.showErrorPrompt("No Map Menu image was found!","Make sure you have set a Map Menu image in Evolve")},checkMapMenuPointerImages(){this.getDefaultPointerImage()||o(this.props.itemIds,(e=>{var t;const n=u(e);return!!n&&null===(null===(t=n._mapMenu)||void 0===t?void 0:t._pointerImage)}))&&this.showErrorPrompt("No default Map Menu pointer image was found!","Make sure you have set a default menu pointer image in Evolve")},showErrorPrompt(e,t){this.props.addPrompt({title:e,body:t,_glyph:{_type:"icon",_icon:"cross"}})},getClassName(){const{props:e,state:t}=this;return c("ev-map-menu ev-menu",e.classList,{"ev-is-dragging":t._isDragging,"ev-use-menu-header-styles":e.theme._menu._settings._useMenuHeaderStyles,"ev-disable-inner-flex":e.theme._footer._settings._isStickyFooterDisabled})},getDefaultPointerImage(){const{props:e}=this;return i(e.course,"_mapMenu._defaultPointerImage")},getCloseButtonText(){const{props:e}=this;return i(e.course,"_mapMenu._closeButtonText")},getIsModalOpen(){const{state:e}=this;return!(!e._isShowingInfo&&!e._selectedItemId)},getMenuBody(){const{props:e}=this;return"course"===e.menu._type?e.menu.body:e.menu.description},onPointerClick(e){this.setState({_selectedItemId:e._id,_isShowingInfo:!1})},onInfoClick(){this.setState({_isShowingInfo:!0,_selectedItemId:null})},onInfoCloseClick(){this.setState({_isShowingInfo:!1})},onCloseMenuItemClick(){this.setState({_selectedItemId:null})},renderTitle(){const{menu:e}=this.props;if(e.displayTitle&&e._mapMenu._shouldShowTitleBar)return l.createElement(f,{title:e.displayTitle,body:this.getMenuBody(),infoOpenButtonAriaLabel:e._mapMenu.infoOpenButtonAriaLabel,onInfoClick:this.onInfoClick,isModalOpen:this.getIsModalOpen()})},renderItems(){const{props:e}=this;return s(e.itemIds,(t=>l.createElement(b,{key:t,itemId:t,defaultPointerImage:this.getDefaultPointerImage(),defaultPointerWidth:e.menu._mapMenu._defaultPointerWidth,isModalOpen:this.getIsModalOpen(),onClick:this.onPointerClick})))},renderMapMenuImage(){const e=this.props.menu._mapMenu._mapImage;if(!e)return;const{props:t,state:n}=this;return l.createElement(_,{graphic:e,alt:t.menu._mapMenu.mapImageAltText,menuImageWidth:i(t,"menu._mapMenu._menuImageWidth",1024),menuScrollableContainerMaxWidth:i(t,"menu._mapMenu._menuScrollableContainerMaxWidth",1024),device:t.device,isModalOpen:this.getIsModalOpen(),isDragging:n._isDragging,onDragStart:()=>this.setState({_isDragging:!0}),onDragEnd:()=>this.setState({_isDragging:!1})},this.renderItems())},renderInfo(){if(this.state._isShowingInfo)return l.createElement(y,{body:this.getMenuBody(),closeButtonText:this.getCloseButtonText(),onInfoCloseClick:this.onInfoCloseClick})},getShouldShowProgressBars(){const{props:e}=this,t=i(e.theme,"_menu._settings._shouldShowProgressBarsOnMenus","content"),n=i(e.menu,"_mapMenu._shouldShowProgressBarsOnMenus",!0);return"content"===t?n:"true"===t},renderMenuItem(){var e,t;if(this.state._selectedItemId)return l.createElement(C,{itemId:this.state._selectedItemId,closeButtonText:this.getCloseButtonText(),onCloseMenuItemClick:this.onCloseMenuItemClick,shouldShowProgressBarsOnMenus:this.getShouldShowProgressBars(),durationIcon:null===(e=this.props.theme._menu)||void 0===e||null===(t=e._settings)||void 0===t?void 0:t._durationIcon})},renderActionBar(){if(this.props.hasActionBar)return l.createElement("div",{className:"ev-action-bar-container"},this.renderElements("actionBar"))},renderElements(e){return g("menu",e,{menu:this.props.menu})},render(){const e=v(),t=this.props.menu.displayTitle&&this.props.menu._mapMenu._shouldShowTitleBar?this.context+1:this.context;return l.createElement(I,null,l.createElement("div",{className:this.getClassName()},M(this.props.menu),l.createElement("main",{className:"ev-menu-container ev-map-menu-container",style:{minHeight:`calc(100vh - ${e})`},tabIndex:"-1"},l.createElement("div",{className:"menu-root"},this.renderElements("root")),l.createElement("div",{className:"ev-menu-container-inner ev-map-menu-container-inner"},this.renderTitle(),l.createElement(h.Provider,{value:t},this.renderMapMenuImage(),this.renderActionBar(),this.renderInfo(),this.renderMenuItem())),l.createElement("div",{className:"ev-menu-footer"},this.renderElements("footer")))))}});E.contextType=h,e.exports=m(null,{addPrompt:p,setAriaLive:d})(E)},67963:(e,t,n)=>{"use strict";var i=n(39322);const s=n(58335),o=n(13980),r=n(2784),a=n(72779),l=n(90212),m=n(88078),c=s({displayName:"MapMenuImage",propTypes:{graphic:o.object.isRequired,device:o.object.isRequired,isModalOpen:o.bool.isRequired,isDragging:o.bool.isRequired,onDragStart:o.func.isRequired,onDragEnd:o.func.isRequired,menuImageWidth:o.number.isRequired,menuScrollableContainerMaxWidth:o.number.isRequired,alt:o.string},getInitialState:()=>({_graphicHeight:null,_graphicWidth:null,_contentHeight:null,_x:0,_y:0}),componentDidMount(){this.setInteract(),this.setContentHeight()},componentDidUpdate({device:e,menuImageWidth:t}){e.windowHeight===this.props.device.windowHeight&&e.orientation===this.props.device.orientation&&t===this.props.menuImageWidth||(this.setImageWidth(),this.setContentHeight())},componentWillUnmount(){l(this._scrollable).unset()},setInteract(){l(this._scrollable).draggable({onmove:this.onDragMove,onend:this.onDragEnd,ignoreFrom:".ev-map-menu-pointer"})},setImageWidth(){const e=this._graphic.getRef(),{naturalWidth:t,naturalHeight:n}=e,{menuImageWidth:i}=this.props,s=0===i?1024:i,o=s/(t/n);this.setState({_graphicWidth:s,_graphicHeight:o})},setContentHeight(){const{windowHeight:e}=this.props.device,{top:t}=i(".ev-container").offset(),n=e-t;this.setState({_contentHeight:n>600?600:n})},getScrollableStyle(){const{_graphicHeight:e,_graphicWidth:t,_x:n,_y:i}=this.state;return{height:e,width:t,transform:`translate(${n}px, ${i}px)`}},onDragMove(e){const{props:t}=this;t.isModalOpen||(t.isDragging||t.onDragStart(),this.setState({_x:this.state._x+e.dx,_y:this.state._y+e.dy}))},onDragEnd(){this.props.onDragEnd()},render(){const{state:e,props:t}=this;return r.createElement("div",{className:a("ev-map-menu-image",{"ev-modal-open":t.isModalOpen}),style:{height:e._contentHeight,maxWidth:t.menuScrollableContainerMaxWidth}},r.createElement("div",{ref:e=>this._scrollable=e},r.createElement("div",{className:"ev-map-menu-image-container",style:this.getScrollableStyle()},r.createElement(m,{ref:e=>this._graphic=e,graphicSrc:t.graphic,onLoad:this.setImageWidth,altText:t.alt}),this.props.children,r.createElement("div",{className:"ev-map-menu-image-overlay"}))))}});e.exports=c},84746:(e,t,n)=>{"use strict";const i=n(58335),s=n(13980),o=n(2784),{Spring:r,config:a,animated:l}=n(64325),m=n(40145),c=n(10817),u=i({displayName:"MapMenuInformation",propTypes:{body:s.string,closeButtonText:s.string.isRequired,onInfoCloseClick:s.func.isRequired},onInfoCloseClick(e){e.currentTarget.blur(),e.preventDefault(),this.props.onInfoCloseClick()},render(){const{props:e}=this;return o.createElement(m,null,o.createElement(r,{native:!0,from:{opacity:0},to:{opacity:1},config:a.default},(({opacity:t})=>o.createElement(l.div,{className:"ev-map-menu-information",style:{opacity:t}},o.createElement("button",{className:"ev-map-menu-button ev-map-menu-information-close-button",onClick:this.onInfoCloseClick,"aria-label":e.closeButtonText},o.createElement("i",{className:"ev-icon ev-icon-cross"})),o.createElement("div",{className:"ev-map-menu-information-inner"},o.createElement(c,{className:"ev-map-menu-body",html:e.body,tabIndex:"1"}),o.createElement("div",{className:"ev-map-menu-information-close-button-container"},o.createElement("button",{className:"ev-map-menu-information-close-button-mobile ev-button",onClick:this.onInfoCloseClick},e.closeButtonText)))))))}});e.exports=u},76434:(e,t,n)=>{"use strict";const i=n(58335),s=n(13980),o=n(2784),{Spring:r,config:a,animated:l}=n(64325),{MenuItemProgress:m,MenuItemHOC:c,MenuItemLink:u}=n(20077),p=n(40145),d=n(19017),h=n(11533),g=n(11865),v=n(57992),I=n(10817),M=n(86587),f=i({displayName:"MapMenuItem",propTypes:{item:s.object.isRequired,closeButtonText:s.string.isRequired,onCloseMenuItemClick:s.func.isRequired,durationIcon:s.string,shouldShowProgressBarsOnMenus:s.bool,pageMenuItemsCount:s.number,pageMenuItemsCompletedCount:s.number,completedChildrenAsPercentage:s.number},onCloseMenuItemClick(e){e.preventDefault(),e.currentTarget.blur(),this.props.onCloseMenuItemClick()},renderTitle(){const e=d(this.props.item);if(e)return o.createElement(h,{id:`${this.props.item._id}-title`,headingElement:`h${this.context}`,displayTitle:e,className:"ev-map-menu-item-title ev-menu-item-title",innerClassName:"ev-map-menu-item-title-inner ev-menu-item-title-inner"})},renderBody(){if(this.props.item.description)return o.createElement(g,{body:this.props.item.description,className:"ev-map-menu-item-body ev-menu-item-body",innerClassName:"ev-map-menu-item-body-inner ev-menu-item-body-inner"})},renderDurationIcon(){const{durationIcon:e}=this.props;if(e)return o.createElement("i",{className:`ev-menu-item-duration-icon ev-icon ev-icon-${e}`})},renderElements(e){const{props:t}=this;return v("menuItem",e,{item:t.item})},render(){const{item:e,closeButtonText:t,pageMenuItemsCompletedCount:n,pageMenuItemsCount:i,completedChildrenAsPercentage:s,shouldShowProgressBarsOnMenus:c}=this.props;return o.createElement(p,null,o.createElement(r,{native:!0,from:{opacity:0},to:{opacity:1},config:a.default},(({opacity:r})=>o.createElement(l.div,{className:"ev-map-menu-item ev-menu-item ev-collection-item",style:{opacity:r}},o.createElement("button",{className:"ev-map-menu-button ev-map-menu-items-close-button",onClick:this.onCloseMenuItemClick,"aria-label":t},o.createElement("i",{className:"ev-icon ev-icon-cross"})),o.createElement("div",{className:"ev-map-menu-item-inner ev-clearfix"},o.createElement("div",{className:"ev-map-menu-item-content-container ev-collection-item-content-inner"},this.renderTitle(),this.renderBody(),o.createElement("div",{className:"ev-map-menu-item-duration ev-menu-item-duration"},o.createElement("div",{className:"ev-map-menu-item-duration-inner ev-menu-item-duration-inner"},this.renderDurationIcon(),o.createElement("span",{className:"ev-menu-item-duration-label"},e.durationLabel),o.createElement(I,{element:"span",html:e.duration}))),this.renderElements("content"),c&&o.createElement(m,{item:e,pageMenuItemsCompletedCount:n,pageMenuItemsCount:i,completedChildrenAsPercentage:s})),o.createElement("div",{className:"ev-map-menu-item-buttons ev-collection-item-footer"},o.createElement("div",{className:"ev-collection-item-footer-inner"},o.createElement(u,{isLocked:e._isLocked,isVisited:e._isVisited,linkText:e.linkText,linkIcon:e.linkIcon,isLinkIconRightPosition:e.isLinkIconRightPosition,link:`/${e._type}/${e._id}`}),o.createElement("button",{className:"ev-map-menu-item-close-button-mobile ev-button",onClick:this.onCloseMenuItemClick},t))))))))}});f.contextType=M,e.exports=c(f)},10052:(e,t,n)=>{"use strict";const i=n(72579),s=n(58335),o=n(13980),r=n(2784),{Motion:a,spring:l}=n(96001),m=n(72779),{connect:c}=n(57903),u=n(88078),p=s({displayName:"MapMenuPointer",propTypes:{item:o.object.isRequired,defaultPointerImage:o.object,defaultPointerWidth:o.number,onClick:o.func.isRequired,isModalOpen:o.bool.isRequired},getInitialState:()=>({_isHovering:!1}),onMouseEnter(){const{isModalOpen:e}=this.props;e||this.setState({_isHovering:!0})},onMouseLeave(){this.setState({_isHovering:!1})},onClick(e){const{props:t}=this;e.preventDefault(),t.isModalOpen||t.onClick(t.item)},getPointerImage(){var e;const{props:t}=this;return(null===(e=t.item._mapMenu)||void 0===e?void 0:e._pointerImage)||t.defaultPointerImage},getPointerImageStyle(){const{props:e}=this,t={},n=e.item._mapMenu._pointerWidth||e.defaultPointerWidth;return n&&(t.width=`${n}px`,t.maxWidth="none"),t},getStyle({scale:e,opacity:t}){const{props:n}=this,s=i(n.item,"_mapMenu._position",{_top:50,_left:50});return{top:`${s._top}%`,left:`${s._left}%`,transform:`translate(-50%, -50%) scale(${e})`,opacity:t}},getMotionStyle(){const{state:e,props:t}=this,n=t.isModalOpen?.5:1,i=e._isHovering?1.2:1;return{scale:l(i,{stiffness:175,damping:e._isHovering?12:20}),opacity:l(n)}},render(){const{props:e}=this;return r.createElement(a,{defaultStyle:{scale:1,opacity:1},style:this.getMotionStyle()},(t=>r.createElement("button",{className:m("ev-map-menu-pointer",{"ev-is-disabled":e.isModalOpen}),style:this.getStyle(t),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.onClick,"aria-label":this.props.item.title},r.createElement(u,{graphicSrc:this.getPointerImage(),style:this.getPointerImageStyle()}))))}});e.exports=c(((e,t)=>({item:e.contentObjects[t.itemId]})))(p)},81895:(e,t,n)=>{"use strict";const i=n(58335),s=n(13980),o=n(2784),r=n(72779),a=n(11533),l=n(86587),m=i({displayName:"MapMenuTitle",propTypes:{title:s.string.isRequired,body:s.string,onInfoClick:s.func.isRequired,isModalOpen:s.bool.isRequired,infoOpenButtonAriaLabel:s.string},onInfoClick(e){e.preventDefault(),e.currentTarget.blur(),this.props.onInfoClick()},renderInfoButton(){const{props:e}=this;if(e.body)return o.createElement("button",{className:r("ev-map-menu-button ev-map-menu-information-button",{"ev-disabled":e.isModalOpen}),disabled:e.isModalOpen,onClick:this.onInfoClick,"aria-label":e.infoOpenButtonAriaLabel},o.createElement("i",{className:"ev-icon ev-icon-question"}))},render(){return o.createElement(a,{headingElement:`h${this.context}`,displayTitle:this.props.title,className:"ev-map-menu-title",innerClassName:"ev-map-menu-title-inner"},(e=>o.createElement(o.Fragment,null,e,this.renderInfoButton())))}});m.contextType=l,e.exports=m},66098:(e,t,n)=>{"use strict";const{registerMenu:i}=n(90876);i("mapMenu",n(93976))},4751:(e,t,n)=>{var i=n(24303);e.exports=function(e,t){var n;return i(e,(function(e,i,s){return!(n=t(e,i,s))})),!!n}},51525:(e,t,n)=>{var i=n(87064),s=n(68286),o=n(4751),r=n(86152),a=n(82406);e.exports=function(e,t,n){var l=r(e)?i:o;return n&&a(e,t,n)&&(t=void 0),l(e,s(t,3))}}}]);