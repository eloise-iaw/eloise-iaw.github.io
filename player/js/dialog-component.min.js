(self.webpackChunk=self.webpackChunk||[]).push([[6008],{99493:(t,e)=>{"use strict";e.DIALOG_ITEM_DISPLAYED="DIALOG_ITEM_DISPLAYED",e.DIALOG_INCREMENT_INDEX="DIALOG_INCREMENT_INDEX",e.DIALOG_SHOW_DIALOG="DIALOG_SHOW_DIALOG",e.dialogItemDisplayed=(t,i)=>({type:e.DIALOG_ITEM_DISPLAYED,payload:{componentId:t,itemId:i}}),e.dialogShowDialog=t=>({type:e.DIALOG_SHOW_DIALOG,payload:{componentId:t}}),e.dialogIncrementIndex=(t,i)=>({type:e.DIALOG_INCREMENT_INDEX,payload:{componentId:t,currentItemIndex:i}})},73125:(t,e,i)=>{"use strict";const n=i(90882),o=i(54073),s=i(55281),r=i(16760),a=i(80537),l=i(58335),c=i(13980),p=i(2784),{Component:m}=i(58720),d=i(96235),u=i(70913),h=i(23346),g=i(73822),_=i(20198),I=l({displayName:"Dialog",propTypes:{component:c.object.isRequired,setComponentAsReady:c.func.isRequired,setComponentAsViewed:c.func.isRequired,setComponentAsStarted:c.func.isRequired,setComponentAsComplete:c.func.isRequired,setFocusOnAriaLabel:c.func.isRequired,dialogItemDisplayed:c.func.isRequired,dialogIncrementIndex:c.func.isRequired,dialogShowDialog:c.func.isRequired,isLivePreview:c.bool.isRequired,isPageReady:c.bool,screenSize:c.string.isRequired,theme:c.object,styles:c.object},getInitialState:function(){return{_canScrollOnEnter:!0}},componentDidMount:function(){const{props:t}=this;t.setComponentAsReady(t.component._id)},UNSAFE_componentWillReceiveProps:function({component:t}){t._isComplete||n(t._items,(t=>t._hasDisplayed)).length===t._items.length&&this.props.setComponentAsComplete(t._id)},componentWillUnmount:function(){this.removeScrollEventListener()},addScrollEventListener:function(){this._scrollYPosition=window.scrollY,window.addEventListener("scroll",this.onWindowScroll)},removeScrollEventListener:function(){window.removeEventListener("scroll",this.onWindowScroll)},setDialogItemAsDisplayed:function(t){const{props:e}=this;e.dialogItemDisplayed(e.component._id,t._id)},startDialog:function(){const{props:t}=this;t.component._hasStarted||t.setComponentAsStarted(t.component._id),t.dialogShowDialog(t.component._id)},startDialogInView:function(){const{component:t}=this.props,e=t._inviewStartDelay||0;this.addScrollEventListener(),this._startTimer=setTimeout((()=>{this.startDialog()}),e)},onWindowScroll:o((function(){const t=window.scrollY;t<this._scrollYPosition?(this.removeScrollEventListener(),this.setState({_canScrollOnEnter:!1})):this._scrollYPosition=t}),100),onVisibilityChanged:function(t,{top:e,bottom:i}){const{props:n}=this;e&&(this.isInviewTop=!0),i&&(this.isInviewBottom=!0),this.isInviewTop&&this.isInviewBottom&&(n.component._hasBeenViewed||n.setComponentAsViewed(n.component._id),n.component._isStartDialogInView&&this.startDialogInView())},onNextItem:function(){const{component:t,dialogIncrementIndex:e}=this.props,i=this.getNextItemIndex(t.currentItemIndex);i?e(t._id,i):this.removeScrollEventListener()},onStartClicked:function(){this.addScrollEventListener(),this.startDialog(),this.props.setFocusOnAriaLabel()},onNextClick:function(){this.onNextItem()},getIsVisibilitySensorActive:function(){const{component:t,isPageReady:e,isLivePreview:i}=this.props;return!!i||!0===e&&!0===t._isReady&&(!0===t._isStartDialogInView&&void 0===this._startTimer||!t._hasBeenViewed)},getItemPerson:function(t){const{component:e}=this.props;return s(e._people,{_id:t._personId})},getNextItemIndex:function(t){const{component:e}=this.props,i=e._items,n=t+1;if(n===i.length)return;const o=i[n];return this.getItemPerson(o)?n:(this.setDialogItemAsDisplayed(o),this.getNextItemIndex(n))},getStyle:function(){const{props:t}=this,e={},{screenSize:i}=t,n="small"===i?"_mobileBackgroundImage":"_backgroundImage",o=t.component[n];return o&&o.src&&(e.backgroundImage=`url(${u(o.src)})`,e.backgroundPosition=o._position,e.backgroundSize=o._size,e.backgroundRepeat="no-repeat"),e},renderDialogStart:function(){const{props:t}=this;if(!t.component.showDialog)return p.createElement(g,{component:t.component,onStartClicked:this.onStartClicked,people:t.component._people,dialogStartButtonText:t.component.dialogStartButtonText,swatches:t.theme._swatches})},renderItems(){const{props:t,state:e}=this,i=t.component._items,n=t.component._dialogItemsContainerWidth,o=e._canScrollOnEnter&&!t.component._shouldDisableProgessionAnimation;if(!t.component.showDialog)return;const s=r(i,((e,i)=>{const n=this.getItemPerson(e);return n?p.createElement(_,{key:e._id,person:n,isCurrentItem:i===t.component.currentItemIndex,onNextItem:this.onNextItem,component:this.props.component,dialogItemAvatarWidth:this.props.component._dialogItemAvatarWidth,shouldShowPersonNameOnItem:this.props.component._shouldShowPersonNameOnItem,item:e,canScrollOnEnter:o,onItemDisplayed:this.setDialogItemAsDisplayed,animations:this.props.component._animations,swatches:t.theme._swatches,useNextButton:!t.component._isStartDialogInView&&t.component._useNextButton}):null})),l={};return a(n)&&(l.width=`${n}%`),p.createElement("ul",{className:"ev-dialog-items",style:l,"aria-live":"assertive"},s)},renderNextButton:function(){const{component:t}=this.props;if(!t._isStartDialogInView&&t.showDialog&&t._useNextButton&&t.currentItemIndex<t._items.length-1)return p.createElement("div",{className:"ev-dialog-next-button-container",style:{textAlign:t._nextButtonAlignment}},p.createElement(h,{text:t.nextButtonText,icon:t._nextButtonIcon,iconSize:t._nextButtonIconSize,iconPosition:t._nextButtonIconPosition,showPulseAnimation:t._nextButtonShowPulseAnimation&&0===t.currentItemIndex,"aria-label":t.nextButtonAriaLabel,onClick:this.onNextClick}))},render:function(){const{props:t}=this;return p.createElement(m,{component:t.component,styles:t.styles,isVisibilitySensorActive:this.getIsVisibilitySensorActive(),onVisibilityChange:this.onVisibilityChanged},p.createElement("div",{className:d(t.component),style:this.getStyle()},this.renderDialogStart(),this.renderItems(),this.renderNextButton()))}});t.exports=I},20198:(t,e,i)=>{"use strict";var n=i(39322);const o=i(80537),s=i(82421),r=i(72579),a=i(58335),l=i(32823),c=i(13980),p=i(2784),m=i(28316),d=i(72779),u=i(56249),h=i(88078),g=i(60309),_=i(11865),I=a({displayName:"DialogItem",propTypes:{person:c.object.isRequired,item:c.object.isRequired,onNextItem:c.func.isRequired,canScrollOnEnter:c.bool.isRequired,onItemDisplayed:c.func.isRequired,animations:c.object,useNextButton:c.bool.isRequired,isCurrentItem:c.bool,dialogItemAvatarWidth:c.string,swatches:c.object,shouldShowPersonNameOnItem:c.bool},mixins:[l],getDefaultProps:function(){return{useNextButton:!1}},componentDidMount:function(){this.props.isCurrentItem&&this.displayItem()},UNSAFE_componentWillReceiveProps:function(t){this.props.item._isVisible||!t.isCurrentItem||this._hasStartedToDisplay||this.displayItem()},componentDidUpdate:function(t){!t.item._isVisible&&this.props.item._isVisible&&this.scrollToItem()},displayItem:function(){this._hasStartedToDisplay=!0,this.props.useNextButton||setTimeout((()=>{this.props.onNextItem()}),this.props.item._delay),this.props.onItemDisplayed(this.props.item)},scrollToItem:function(){const t=m.findDOMNode(this);if(t){const e=n(t),i=n(window),o=i.scrollTop();if(this.props.canScrollOnEnter&&e.offset().top+e.height()>o+i.height()){const e=o+t.offsetHeight+100;n("html, body").animate({scrollTop:e},1e3)}}},getAvatarStyle:function(){return{width:this.props.dialogItemAvatarWidth}},getItemInnerStyle:function(){const{person:t}=this.props,e=this.props.item._dialogItemWidth,i=g(t._dialogBackgroundColor,this.props.swatches),n={};return i&&"transparent"!==i&&(n.backgroundColor=i),o(e)&&(n.width=`${e}%`),n},getTextStyle:function(){const{person:t}=this.props,e=g(t._dialogTextColor,this.props.swatches),i={};return e&&"transparent"!==e&&(i.color=e),i},getAnimations:function(){const{item:t,animations:e}=this.props;let i=s({},e);if(e||(i={_slideInX:{_isEnabled:!0,_from:100},_fadeIn:{_isEnabled:!0,_from:0},_easing:"slow"}),i._slideInX._isEnabled){const e=t._isOnRightSide,n=i._slideInX._from;return s({},i,{_slideInX:s({},i._slideInX,{_from:e?n:-n})})}return i},renderPersonName:function(){if(this.props.shouldShowPersonNameOnItem)return p.createElement("div",{className:"ev-dialog-item-name",style:this.getTextStyle()},this.props.person.name)},render:function(){const t=this.getAnimations(),e=r(t,"_fadeIn._isEnabled",!1),i=r(t,"_scaleIn._isEnabled",!1);return this.props.item._isVisible||e||i?this.props.useNextButton&&!this.props.item._isVisible?null:p.createElement(u,{className:d("ev-dialog-item",{"ev-dialog-item-right-item":this.props.item._isOnRightSide,"ev-dialog-item-current-item":this.props.isCurrentItem}),tag:"li",animations:t,startAnimation:this.props.item._isVisible},p.createElement("div",{className:"ev-dialog-item-inner",style:this.getItemInnerStyle()},p.createElement("div",{className:"ev-dialog-item-avatar"},p.createElement(h,{graphicSrc:this.props.person.avatar,altText:this.props.person.name,style:this.getAvatarStyle(),autoSize:!1}),this.renderPersonName()),p.createElement(_,{className:"ev-dialog-item-message",style:this.getTextStyle(),body:this.props.item.body}))):null}});t.exports=I},73822:(t,e,i)=>{"use strict";const n=i(16760),o=i(58335),s=i(13980),r=i(2784),{Motion:a,spring:l}=i(96001),c=i(60309),p=i(88078),m=o({displayName:"DialogStart",getInitialState:function(){return{_y:0,_opacity:1}},propTypes:{component:s.object.isRequired,onStartClicked:s.func.isRequired,people:s.array.isRequired,dialogStartButtonText:s.string.isRequired,swatches:s.object},getStyle:function(t){return{transform:`translate3d(0, ${t.y}%, 0)`,opacity:t.opacity}},getAvatarImgStyle:function(){return{width:this.props.component._dialogStartAvatarWidth}},getAvatarStyle:function(t){const e=c(t._dialogBackgroundColor,this.props.swatches),i={};return e&&"transparent"!==e&&(i.backgroundColor=e),i},getTextStyle:function(t){const e=c(t._dialogTextColor,this.props.swatches),i={};return e&&"transparent"!==e&&(i.color=e),i},onStartClicked:function(t){t.preventDefault(),this.setState({_y:-20,_opacity:0,_startClicked:!0}),setTimeout((()=>{this.props.onStartClicked()}),300)},renderStartButton:function(){if(!this.state._startClicked&&!this.props.component._isStartDialogInView)return r.createElement("button",{className:"ev-dialog-start-button ev-button ev-primary",onClick:this.onStartClicked},this.props.dialogStartButtonText)},renderPeople:function(){return n(this.props.people,(t=>r.createElement("div",{className:"ev-dialog-start-avatar",key:t._id,style:this.getAvatarStyle(t)},r.createElement(p,{graphicSrc:t.avatar,altText:t.name,style:this.getAvatarImgStyle(),autoSize:!1}),r.createElement("div",{className:"ev-dialog-start-name",style:this.getTextStyle(t)},t.name))))},renderContent:function(t){return r.createElement("div",{className:"ev-dialog-start-avatars",style:this.getStyle(t)},this.renderPeople())},render:function(){return r.createElement("div",{className:"ev-dialog-start"},r.createElement(a,{defaultStyle:{y:0,opacity:1},style:{y:l(this.state._y),opacity:l(this.state._opacity)}},this.renderContent),r.createElement("div",{className:"ev-dialog-start-action"},this.renderStartButton()))}});t.exports=m},7159:(t,e,i)=>{"use strict";const{registerComponent:n}=i(90876),o=i(73125),{dialogItemDisplayed:s,dialogIncrementIndex:r,dialogShowDialog:a}=i(99493);n("dialog",{component:o,actions:{dialogItemDisplayed:s,dialogIncrementIndex:r,dialogShowDialog:a},reducer:i(74146),trackingMap:i(82179),mapStateToProps:({app:t})=>({isLivePreview:t.isLivePreview})})},74146:(t,e,i)=>{"use strict";const n=i(12982),o=i(60019),s=i(16760),{SETUP_COMPONENT:r}=i(29933),{DIALOG_ITEM_DISPLAYED:a,DIALOG_INCREMENT_INDEX:l,DIALOG_SHOW_DIALOG:c}=i(99493);t.exports=(t,e)=>{switch(e.type){case r:return o({},t,{showDialog:!1,currentItemIndex:0,_items:s(t._items,(t=>o({},t,{_isVisible:!1})))});case c:return o({},t,{showDialog:!0});case a:return function(t,e){const{itemId:i}=t.payload,s=n(e._items,(t=>t._id===i)),r=o({},e._items[s],{_hasDisplayed:!0,_isVisible:!0}),a=[...e._items.slice(0,s),r,...e._items.slice(s+1)];return o({},e,{_items:a})}(e,t);case l:return o({},t,{currentItemIndex:e.payload.currentItemIndex});default:return t}}},82179:t=>{"use strict";t.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_hasDisplayed:{fieldKey:"_hasDisplayed",type:"Boolean",shouldRestore:!0}}}}},96235:(t,e,i)=>{"use strict";const n=i(72779);t.exports=function(t){return n(`ev-${t._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!t._isEnabled,"ev-complete ev-show-user-answer":t._isComplete&&!t._isEnabled,"ev-correct":t._isCorrect&&!t._isEnabled,"ev-submitted":t._isSubmitted})}},80537:(t,e,i)=>{var n=i(53366),o=i(15125);t.exports=function(t){return"number"==typeof t||o(t)&&"[object Number]"==n(t)}}}]);