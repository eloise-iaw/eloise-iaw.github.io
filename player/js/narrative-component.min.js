"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5755],{23333:(e,t)=>{t.SET_CURRENT_INDEX="SET_CURRENT_INDEX",t.INCREMENT_CURRENT_INDEX="INCREMENT_CURRENT_INDEX",t.DECREMENT_CURRENT_INDEX="DECREMENT_CURRENT_INDEX",t.setCurrentIndex=e=>({type:t.SET_CURRENT_INDEX,payload:e}),t.incrementCurrentIndex=e=>({type:t.INCREMENT_CURRENT_INDEX,payload:e}),t.decrementCurrentIndex=e=>({type:t.DECREMENT_CURRENT_INDEX,payload:e})},51471:(e,t,n)=>{var r=n(39322);const i=n(98923),o=n(72579),s=n(58335),a=n(13980),c=n(2784),d=n(72779),l=n(68374),p=n(96235),m=n(88934),u=n(43855),{Component:h}=n(58720),_=n(86587),v=n(80058),g=n(55252),I=s({displayName:"Narrative",propTypes:{component:a.object.isRequired,setComponentAsReady:a.func.isRequired,setComponentAsViewed:a.func.isRequired,setComponentAsStarted:a.func.isRequired,setComponentAsComplete:a.func.isRequired,setCurrentIndex:a.func.isRequired,incrementCurrentIndex:a.func.isRequired,decrementCurrentIndex:a.func.isRequired,windowWidth:a.number,isFullScreenOpen:a.bool,isPageReady:a.bool,isRTL:a.bool,animationEnded:a.bool,screenSize:a.string,setAriaLive:a.func,styles:a.object},getInitialState:()=>({_carouselHeight:"auto"}),componentDidMount(){this.props.setComponentAsReady(this.props.component._id),this.setHeights()},UNSAFE_componentWillReceiveProps({component:e,windowWidth:t,isFullScreenOpen:n,animationEnded:r}){const{props:i}=this;e._currentIndex===e._items.length-1&&(e._isComplete||this.props.setComponentAsComplete(e._id)),(t!==i.windowWidth||i.isFullScreenOpen&&!n||i.component._isHidden&&!e._isHidden||!i.animationEnded&&r)&&this.setHeights()},componentDidUpdate(e){const{props:t}=this;e.component._currentIndex!==t.component._currentIndex&&(i((()=>{this.setAriaLive()}),1e3),r(this._content).scrollTop(0))},setStarted(){const{props:e}=this;e.component._hasStarted||e.setComponentAsStarted(e.component._id)},setHeights(){const{props:e}=this,t=e.component._narrativeLayout;let n="auto";"large"===e.screenSize&&"Full"!==t&&this._carousel&&(n=`${this._carousel.getBoundingClientRect().height}px`),this.setState({_carouselHeight:n})},setAriaLive(){const{component:e,setAriaLive:t}=this.props,n=e._items[e._currentIndex];t({message:(n.title||"")+(n.body||"")+o(n,"_graphic.alt","")})},getCanNavigateNext(){const{props:e}=this;return e.component._currentIndex<e.component._items.length-1},getCanNavigatePrevious(){const{props:e}=this;return e.component._currentIndex>0},onImageLoaded(){this.setHeights()},onNextSlideButtonClicked(e){e.preventDefault();const{props:t}=this;t.incrementCurrentIndex({componentId:t.component._id}),this.setStarted()},onPreviousSlideButtonClicked(e){e.preventDefault();const{props:t}=this;t.decrementCurrentIndex({componentId:t.component._id})},onItemImageFocused({itemIndex:e}){const{setCurrentIndex:t,component:n}=this.props;t({componentId:n._id,nextIndex:e})},onVisibilityChange(...e){u(...e,this,this.props.setComponentAsViewed)},onDirectionKeyDown(e){const{props:t}=this;"right"===e&&this.getCanNavigateNext()&&(t.incrementCurrentIndex({componentId:t.component._id}),this.setStarted()),"left"===e&&this.getCanNavigatePrevious()&&t.decrementCurrentIndex({componentId:t.component._id})},getIsVisibilitySensorActive(){const{component:e,isPageReady:t}=this.props;return!0===t&&!0===e._isReady&&!0!==e._hasBeenViewed},renderPreviousSlideButton(e){const{props:t}=this;if(e===("small"===t.screenSize?"small":"large")&&this.getCanNavigatePrevious())return c.createElement("a",{href:"#",tabIndex:"0",role:"button",ref:e=>this._prev=e,"aria-label":t.component.prevButtonAriaLabel,className:d(`ev-narrative-controls ev-narrative-controls-${e}`,{"ev-narrative-control-left":!t.isRTL,"ev-narrative-control-right":t.isRTL}),onClick:this.onPreviousSlideButtonClicked},c.createElement("div",{className:d("ev-icon",{"ev-icon-arrow-left":!t.isRTL,"ev-icon-arrow-right":t.isRTL})}))},renderNextSlideButton(e){const{props:t}=this;if(e!==("small"===t.screenSize?"small":"large")||!this.getCanNavigateNext())return;const n=0===t.component._currentIndex&&!t.component._hasStarted&&t.component._canPulsate;return c.createElement("a",{href:"#",tabIndex:"0",role:"button",ref:e=>this._next=e,"aria-label":t.component.nextButtonAriaLabel,className:d(`ev-narrative-controls ev-narrative-controls-${e}`,{"ev-can-animate":n,"ev-narrative-control-right":!t.isRTL,"ev-narrative-control-left":t.isRTL}),onClick:this.onNextSlideButtonClicked},c.createElement("div",{className:d("ev-icon",{"ev-icon-arrow-right":!t.isRTL,"ev-icon-arrow-left":t.isRTL})}))},renderSlideContainer(){const{props:e}=this,t=e.component._currentIndex,n=e.component._shouldReloadGifs,r=e.component._items.map(((e,r)=>c.createElement(v,{key:e._id,item:e,shouldReloadGifs:n,isCurrentItem:r===t,onImageLoaded:this.onImageLoaded,onItemImageFocused:this.onItemImageFocused})));return c.createElement("div",{className:"ev-narrative-slide-container"},this.renderPreviousSlideButton("large"),this.renderNextSlideButton("large"),c.createElement(l,{currentIndex:e.component._currentIndex,animations:e.component._animations,_ref:e=>this._carousel=e},r))},renderIndicators(e){const{props:t}=this,n=t.component._items.map(((e,n)=>c.createElement("div",{key:e._id,className:d("ev-narrative-progress ev-component-item-color ev-component-item-border",{"ev-selected":n===t.component._currentIndex})})));return c.createElement("div",{className:`ev-narrative-indicators ev-component-indicators ev-narrative-indicators-${e}`},this.renderPreviousSlideButton("small"),this.renderNextSlideButton("small"),n)},renderContent(){const{props:e}=this,t=e.component._items.map(((t,n)=>c.createElement(g,{key:t._id,item:t,isHidden:n!==e.component._currentIndex}))),n={},r=e.component._narrativeLayout.toLowerCase();return"left"!==r&&"right"!==r||"large"!==e.screenSize||(n.height=this.state._carouselHeight),c.createElement("div",{className:"ev-narrative-content ev-component-content",style:n},c.createElement("div",{ref:e=>this._content=e,className:"ev-narrative-content-inner ev-component-content-inner"},t))},renderWidget(){const{props:e}=this,t=e.component._narrativeLayout.toLowerCase();let n=p(e.component);return n=d(n,{"ev-js-layout-full":!t||"full"===t,"ev-js-layout-left":"left"===t,"ev-js-layout-right":"right"===t}),!e.component._shouldDisplayContentOnTop||"full"!==t&&"large"===e.screenSize?c.createElement("div",{className:n},this.renderSlideContainer(),this.renderIndicators("full"),this.renderContent(),this.renderIndicators("side")):c.createElement("div",{className:n},this.renderContent(),this.renderSlideContainer(),this.renderIndicators("full"),this.renderIndicators("side"))},render(){const{props:e}=this,t=e.component.displayTitle?this.context+1:this.context;return c.createElement(h,{component:e.component,styles:e.styles,isVisibilitySensorActive:m(e),onVisibilityChange:this.onVisibilityChange,onDirectionKeyDown:this.onDirectionKeyDown},c.createElement(_.Provider,{value:t},this.renderWidget()))}});I.contextType=_,e.exports=I},55252:(e,t,n)=>{const r=n(58335),i=n(13980),o=n(32823),s=n(72779),a=n(2784),c=n(11865),d=n(10817),l=n(86587),p=r({displayName:"NarrativeItemContent",propTypes:{item:i.shape({title:i.string,body:i.string}),isHidden:i.bool.isRequired},mixins:[o],render(){const{item:e,isHidden:t}=this.props;return a.createElement("div",{className:s("ev-narrative-content-item ev-component-content-item",{"ev-narrative-hidden":t})},e.title&&a.createElement(d,{element:`h${this.context}`,className:"ev-narrative-content-title-inner ev-component-content-title-inner",html:e.title}),e.body&&a.createElement(c,{className:"ev-narrative-content-body ev-component-content-body",innerClassName:"ev-narrative-content-body-inner ev-component-content-body-inner",body:e.body}))}});p.contextType=l,e.exports=p},80058:(e,t,n)=>{const r=n(58335),i=n(13980),o=n(32823),s=n(2784),a=n(96075),c=n(88078),d=r({displayName:"NarrativeItemGraphic",propTypes:{item:i.object.isRequired,shouldReloadGifs:i.bool,isCurrentItem:i.bool.isRequired,onImageLoaded:i.func,onItemImageFocused:i.func.isRequired},mixins:[o],getImage(){var e,t;const{item:n}=this.props;if(!a(n._graphic))return null;const{shouldReloadGifs:r,isCurrentItem:i,onImageLoaded:o,onItemImageFocused:d}=this.props,l="gif"===(null===(e=n._graphic)||void 0===e||null===(t=e.src)||void 0===t?void 0:t._extension);return s.createElement(c,{graphicSrc:n._graphic.src,graphicSrcAdvanced:n._graphic.srcAdvanced,isLightboxEnabled:n._graphic._shouldViewInLightbox,lightboxSrc:n._graphic.lightboxSrc,lightboxSrcAdvanced:n._graphic.lightboxSrcAdvanced,autoSize:!0,altText:n._graphic.alt,onLoad:o,shouldEnableGraphicText:n._shouldEnableGraphicText,disableCache:i&&l&&!!r,graphicText:n.graphicText,graphicTextLayout:n._graphicTextLayout,graphicTextWidth:n._graphicTextWidth,graphicTextTopPadding:n._graphicTextTopPadding,graphicTextBottomPadding:n._graphicTextBottomPadding,graphicTextLeftPadding:n._graphicTextLeftPadding,graphicTextRightPadding:n._graphicTextRightPadding,graphicTextStyles:n._graphicTextStyles,onFocus:()=>d(n)})},render(){return s.createElement("div",{className:"ev-narrative-slider-graphic"},this.getImage())}});e.exports=d},51776:(e,t,n)=>{const{registerComponent:r}=n(90876),i=n(51471),o=n(67641),{setCurrentIndex:s,incrementCurrentIndex:a,decrementCurrentIndex:c}=n(23333);r("narrative",{component:i,actions:{setCurrentIndex:s,incrementCurrentIndex:a,decrementCurrentIndex:c},reducer:o,trackingMap:n(91350),mapStateToProps:({device:e,fullScreen:t})=>({windowWidth:e.windowWidth,isFullScreenOpen:t.isOpen})})},67641:(e,t,n)=>{const r=n(27875),{SETUP_COMPONENT:i}=n(29933),{SET_CURRENT_INDEX:o,INCREMENT_CURRENT_INDEX:s,DECREMENT_CURRENT_INDEX:a}=n(23333);e.exports=(e,t)=>{switch(t.type){case i:return{...e,_currentIndex:0};case o:return{...e,_currentIndex:r(t.payload.nextIndex,0,e._items.length-1)};case s:return{...e,_currentIndex:r(e._currentIndex+1,0,e._items.length-1)};case a:return{...e,_currentIndex:r(e._currentIndex-1,0,e._items.length-1)};default:return e}}},91350:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_currentIndex:{fieldKey:"_currentIndex",type:"Number",shouldRestore:!0}}},68374:(e,t,n)=>{const r=n(72579),i=n(58335),o=n(13980),s=n(2784),a=n(72779),{Spring:c,config:d,animated:l}=n(64325),{connect:p}=n(57903),m=i({displayName:"Carousel",propTypes:{currentIndex:o.number.isRequired,initialIndex:o.number.isRequired,animations:o.object.isRequired,className:o.string,isRTL:o.bool,verticalAlignment:o.string,_ref:o.func},getInitialState:()=>({_animationEnded:!1,_canAnimateItemTransform:!1}),UNSAFE_componentWillReceiveProps(e){const{currentIndex:t}=this.props;t!==e.currentIndex&&this.setState({_canAnimateItemTransform:!0})},getDefaultProps:()=>({currentIndex:0,initialIndex:0,animations:{_slideIn:!0,_fadeIn:{_isEnabled:!1},_scaleIn:{_isEnabled:!1},_easing:"default"}}),onStart(){this.setState({_animationEnded:!1})},onRest(){this.setState({_animationEnded:!0})},renderCarousel(){const{currentIndex:e,initialIndex:t,animations:n}=this.props,r=100*t,i=100*e;return n._slideIn?s.createElement(c,{native:!0,from:{x:r},to:{x:i},config:d[n._easing]||d.default},(({x:e})=>this.renderCarouselInner(e,!0))):this.renderCarouselInner(i)},renderCarouselInner(e,t){const{verticalAlignment:n,isRTL:r}=this.props,i=`ev-carousel-inner ev-vertical-align-${n?n.toLowerCase():"normal"}`,o=r?"":"-",a=t?l.ul:"ul",c={left:t?e.interpolate((e=>`${o}${e}%`)):`${o}${e}%`};return s.createElement(a,{className:i,style:c},this.renderCarouselItems())},getItemStyle(e,t){const{_animationEnded:n,_canAnimateItemTransform:r}=this.state,i={opacity:e,transform:t.interpolate((e=>`scale(${e})`))};return!n&&r||(i.transform="none"),i},renderCarouselItems(){const{children:e,currentIndex:t,animations:n}=this.props;return e.map(((e,r)=>{const i=r===t,{_fadeIn:o,_scaleIn:a}=n;return s.createElement(c,{native:!0,key:r,from:{opacity:o&&o._isEnabled?o._from/100:.99,scale:a&&a._isEnabled?a._from/100:1},to:{opacity:o&&o._isEnabled?i?1:o._from/100:1,scale:a&&a._isEnabled?i?1:a._from/100:1},config:d[n._easing]||d.default,onStart:this.onStart,onRest:this.onRest},(({opacity:t,scale:n})=>s.createElement(l.li,{className:"ev-carousel-item","aria-hidden":!i,style:this.getItemStyle(t,n)},e)))}))},render(){return s.createElement("div",{ref:this.props._ref,className:a("ev-carousel",this.props.className)},this.renderCarousel())}});e.exports=p((({course:e,device:t})=>({isRTL:r(e,"_isRTL",!1),windowWidth:t.windowWidth})))(m)},88934:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:n,isPageReady:r}=e;return!0===r&&!0===n._isReady&&!0!==n[t]}},96235:(e,t,n)=>{const r=n(72779);e.exports=function(e){return r(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},43855:e=>{e.exports=function(e,t,n,r,i){r&&r.props&&r.props.component?(t.top&&(r.isInviewTop=!0),t.bottom&&(r.isInviewBottom=!0),r.isInviewTop&&r.isInviewBottom&&i&&i(r.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);