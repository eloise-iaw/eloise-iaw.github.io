"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8830],{99440:(e,s)=>{s.OPENINPUT_SAVE_USER_ANSWER="OPENINPUT_SAVE_USER_ANSWER",s.saveUserAnswer=e=>({type:s.OPENINPUT_SAVE_USER_ANSWER,payload:e})},85906:(e,s,t)=>{const n=t(98923),o=t(1842),r=t(58335),i=t(13980),a=t(2784),l=t(72779),{Component:p,ComponentAssignment:c}=t(58720),d=t(23346),u=t(41119),m=t(27843),h=t(88934),v=t(43855),_=t(96235),A=r({displayName:"OpenInput",propTypes:{course:i.object.isRequired,component:i.object.isRequired,setComponentAsReady:i.func.isRequired,setComponentAsViewed:i.func.isRequired,setComponentAsComplete:i.func.isRequired,showFeedback:i.func.isRequired,saveUserAnswer:i.func.isRequired,setAriaLive:i.func.isRequired,styles:i.any},getInitialState(){return{_userAnswer:this.props.component._userAnswer||"",_showSavedModal:!1}},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},UNSAFE_componentWillReceiveProps({component:e}){o(e._userAnswer)||e._userAnswer===this.state._userAnswer||this.setState({_userAnswer:e._userAnswer})},componentDidUpdate(e){const{component:s}=this.props;!e.component._isSubmitted&&s._isSubmitted&&(this.showSavedModal(),s._userAnswer&&this.showFeedback())},saveUserAnswer(e){const{props:s}=this;s.saveUserAnswer({componentId:s.component._id,userAnswer:e}),s.component._isSubmitted&&(this.showSavedModal(),e&&this.showFeedback())},showFeedback(){const{component:e}=this.props;if(!e._canShowFeedback)return;const s={feedbackTitle:e._shouldShowDisplayTitleInFeedback?e.displayTitle:null,feedbackMessage:e.feedbackMessage,feedbackGraphic:e.feedbackGraphic};setTimeout((()=>{this.props.showFeedback(s)}),200)},showSavedModal(){this.setState({_showSavedModal:!0}),n((()=>{this.setState({_showSavedModal:!1})}),1e3)},onTextAreaChange(e){this.setState({_userAnswer:e})},onSaveClicked(){const{component:e,setAriaLive:s,setComponentAsComplete:t}=this.props;this.saveUserAnswer(this.state._userAnswer),s({message:e.savedAriaLiveMessage,isAssertive:!1}),t(e._id,{_isSubmitted:!0})},onClearClicked(){this.saveUserAnswer("");const{component:e,setAriaLive:s}=this.props;s({message:e.clearedAriaLiveMessage,isAssertive:!1})},onVisibilityChange(...e){v(...e,this,this.props.setComponentAsViewed)},getTextAreaMinHeight(){return this.props.component._hasMinimumHeight?this.props.component._minimumHeight:300},renderTextArea(){var e;const{component:s}=this.props;return(null===(e=s._assignment)||void 0===e?void 0:e._isMarked)?a.createElement("div",{className:"ev-openInput-userAnswer"},a.createElement("div",{className:"ev-openInput-userAnswer-inner"},s._userAnswer)):a.createElement(u,{ariaLabel:s.textAreaAriaLabel,value:this.state._userAnswer,onChange:this.onTextAreaChange,placeholder:s.placeholder,minHeight:this.getTextAreaMinHeight()})},getIsSaveDisabled(){const{component:e}=this.props,{_userAnswer:s}=this.state;return""===s&&!e._userAnswer||s===e._userAnswer},renderButtons(){var e;if(null!==(e=this.props.component._assignment)&&void 0!==e&&e._isMarked)return;const{isActionButtonOnRight:s}=m(this.props);return a.createElement("div",{className:l("ev-buttons",{"ev-switch-buttons":s})},a.createElement(d,{className:"ev-button-save",text:this.props.component._saveButton,isDisabled:this.getIsSaveDisabled(),onClick:this.onSaveClicked}),a.createElement(d,{className:"ev-button-clear",text:this.props.component._clearButton,isDisabled:""===this.state._userAnswer,onClick:this.onClearClicked}))},renderSaveModal(){return a.createElement("div",{className:l("ev-openInput-save-modal",{"ev-is-visible":this.state._showSavedModal})},a.createElement("div",{className:"ev-openInput-save-modal-inner"},a.createElement("span",{className:"ev-save-success-message"},this.props.component._saveSuccessMessage)))},renderComponentAssignment(){var e,s;const{course:t,component:n}=this.props;if(null!==(e=t._assignment)&&void 0!==e&&e._isEnabled&&null!==(s=n._assignment)&&void 0!==s&&s._isEnabled)return a.createElement(c,{component:n,assignment:n._assignment})},render(){const{props:e}=this;return a.createElement(p,{component:e.component,styles:e.styles,isVisibilitySensorActive:h(e),onVisibilityChange:this.onVisibilityChange},a.createElement("div",null,a.createElement("div",{className:_(e.component)},this.renderTextArea(),this.renderSaveModal()),this.renderButtons(),this.renderComponentAssignment()))}});e.exports=A},33898:(e,s,t)=>{const n=t(63867);e.exports=(e,s)=>({articleStyle:n(e,s,"article")._classes})},77825:(e,s,t)=>{const{registerComponent:n}=t(90876),o=t(85906),r=t(3137),{saveUserAnswer:i}=t(99440);n("openInput",{component:o,actions:{saveUserAnswer:i},reducer:r,mapStateToProps:t(33898),trackingMap:t(2141)})},3137:(e,s,t)=>{const n=t(78871),{OPENINPUT_SAVE_USER_ANSWER:o}=t(99440);e.exports=function(e,s){return s.type===o?{...e,_userAnswer:s.payload.userAnswer,_isCorrect:!0,_isSubmitted:!0,_correctAt:n()}:e}},2141:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_userAnswer:{fieldKey:"_userAnswer",type:"String",shouldRestore:!0},_assignment:{fieldKey:"_assignment",type:"Object",shouldRestore:!0},_assignmentAttempts:{fieldKey:"_assignmentAttempts",type:"Object",shouldRestore:!0}}},41119:(e,s,t)=>{const n=t(58335),o=t(13980),r=t(2784),i=t(72779),a=n({displayName:"TextArea",propTypes:{id:o.string,value:o.string.isRequired,label:o.string,onChange:o.func.isRequired,onFocus:o.func,onBlur:o.func,className:o.string,placeholder:o.string,minHeight:o.number,ariaLabel:o.string,isDisabled:o.bool,shouldFocus:o.bool},getDefaultProps:()=>({value:""}),componentDidUpdate(e){const{shouldFocus:s}=this.props;s&&!e.shouldFocus&&this._textArea.focus()},renderTextArea(){const{props:e}=this;return r.createElement("textarea",{id:e.id,ref:e=>this._textArea=e,"aria-label":e.ariaLabel,value:e.value,onChange:s=>e.onChange(s.target.value),onFocus:e.onFocus,onBlur:e.onBlur,placeholder:e.placeholder,className:i("ev-text-area",e.className),style:{minHeight:e.minHeight},disabled:e.isDisabled})},render(){const{props:e}=this;return e.label?r.createElement(r.Fragment,null,r.createElement("label",{className:"ev-label",htmlFor:e.id,dangerouslySetInnerHTML:{__html:e.label},style:{pointerEvents:e.isDisabled?"none":"all"}}),this.renderTextArea()):this.renderTextArea()}});e.exports=a},88934:e=>{e.exports=(e,s="_hasBeenViewed")=>{const{component:t,isPageReady:n}=e;return!0===n&&!0===t._isReady&&!0!==t[s]}},96235:(e,s,t)=>{const n=t(72779);e.exports=function(e){return n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},43855:e=>{e.exports=function(e,s,t,n,o){n&&n.props&&n.props.component?(s.top&&(n.isInviewTop=!0),s.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&o&&o(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);