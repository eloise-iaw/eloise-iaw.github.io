(self.webpackChunk=self.webpackChunk||[]).push([[8701],{49560:(e,s,t)=>{"use strict";const n=t(58335),o=t(13980),r=t(2784),a=t(28316),{connect:i}=t(57903),c=t(60309),m=t(21476),l=n({displayName:"CourseAssessmentProgressCircle",propTypes:{variables:o.object.isRequired,componentsCount:o.number.isRequired,completedComponentsCount:o.number.isRequired,swatches:o.object},getDefaultProps:()=>({completedComponentsCount:0}),componentDidMount(){const e=a.findDOMNode(this),{variables:s,componentsCount:t,completedComponentsCount:n,swatches:o}=this.props,r=c(s["@chart-background-color"],o),i=c(s["@chart-highlight-color"],o),l=c(s["@chart-text-color"],o),u=`${Math.round(n/t*100)}%`;m(e,80,80,n,t,u,18,38,38,4,4,r,i,l)},render:()=>r.createElement("div",{className:"ev-course-assessment-results-stats-progress-canvas"})});e.exports=i((e=>({variables:e.theme._chart._variables,swatches:e.theme._swatches})))(l)},57005:(e,s,t)=>{"use strict";var n=t(14859)(t(58527));const o=t(58335),r=t(13980),a=t(2784),{ContentContainer:i,HeroImage:c}=t(20077),m=t(46392),l=t(36998),u=t(615),p=t(86587),d=t(23346),v=t(11865),_=t(72489),h=t(47169),A=t(46666),C=t(10772),E=t(448),b=o({displayName:"CourseAssessmentResults",propTypes:{components:r.object.isRequired,courseAssessment:r.object.isRequired,showConfirmResetDialog:r.func.isRequired,theme:r.object.isRequired,course:r.object.isRequired,isReady:r.bool.isRequired,addPrompt:r.func.isRequired},getInitialState:()=>({_selectedComponentId:null}),onViewBreakDown(e){this.setState({_selectedComponentId:e._id})},onViewComponent(e){l(e._refId)},onShowFeedback(e){const{course:s,addPrompt:t}=this.props;t(m(e,e._userFeedback,s))},onCloseCourse(e){e.preventDefault(),window._exitCourse()},onRetakeAssessment(){this.props.showConfirmResetDialog()},getCompletedComponentsCount(){const{completedComponentsCount:e}=this.props.courseAssessment;return e||0},renderNoResults(){const{courseAssessment:e}=this.props;if(!this.getCompletedComponentsCount()&&e.noResultsText)return a.createElement(_,null,a.createElement(v,{className:"ev-component-body",innerClassName:"ev-component-body-inner",body:e.noResultsText}))},renderOverview(){if(this.getCompletedComponentsCount())return a.createElement(A,(0,n.default)({},this.props.courseAssessment,{components:this.props.components}))},renderBreakdown(){const{props:e}=this;if(!e.courseAssessment._shouldHideBreakdown)return this.getCompletedComponentsCount()?a.createElement(C,{courseAssessment:e.courseAssessment,components:e.components,selectedComponentId:this.state._selectedComponentId,onViewBreakDown:this.onViewBreakDown,onViewComponent:this.onViewComponent,onShowFeedback:this.onShowFeedback}):void 0},renderRetake(){const{courseAssessment:e}=this.props;if(e._isComplete&&e._canBeRetaken)return a.createElement(E,{courseAssessment:e,onRetakeAssessment:this.onRetakeAssessment})},renderCloseCourseButton(){const{courseAssessment:e}=this.props;if(e._isComplete&&e._hasCloseCourseButton)return a.createElement("div",{className:"ev-course-assessment-results-overview-close ev-content ev-extension-content"},a.createElement("div",{className:"ev-course-assessment-results-overview-close-inner ev-content-inner"},a.createElement(d,{className:"ev-course-assessment-results-overview-close-button",icon:"cross",iconPosition:"right",onClick:this.onCloseCourse,text:e._closeCourseButtonText})))},renderHeroImage(){const{_heroImage:e}=this.props.courseAssessment;if(null!=e&&e._isEnabled)return a.createElement(p.Provider,{value:this.props.courseAssessment.title?this.context+1:this.context},a.createElement(c,{title:e.title,body:e.body,graphic:e._graphic,_contentWidth:e._contentWidth,layout:e.layout,floatingGraphic:e._floatingGraphic,parentSelector:".ev-extension-hero-container",theme:this.props.theme,isReady:this.props.isReady}))},render(){var e,s;const{courseAssessment:t,isReady:o,theme:r}=this.props,c=t.title||null!==(e=t._heroImage)&&void 0!==e&&e._isEnabled&&null!==(s=t._heroImage)&&void 0!==s&&s.title?this.context+1:this.context;return a.createElement(i,{region:"course assessment",className:"ev-course-assessment-results ev-extension",ariaLabel:t.ariaLabel},a.createElement("div",{className:"ev-extension-inner"},o?null:a.createElement(u,null),a.createElement("div",{className:"ev-extension-hero-container"},this.renderHeroImage()),a.createElement(h,(0,n.default)({},t,{theme:r})),a.createElement(p.Provider,{value:c},this.renderNoResults(),this.renderOverview(),this.renderBreakdown(),this.renderRetake(),this.renderCloseCourseButton())))}});b.contextType=p,e.exports=b},10772:(e,s,t)=>{"use strict";const n=t(98346),o=t(58335),r=t(13980),a=t(2784),i=t(72489),c=t(11533),m=t(86587),l=t(61559),u=o({displayName:"CourseAssessmentResultsBreakDown",propTypes:{components:r.object.isRequired,courseAssessment:r.object.isRequired,onViewBreakDown:r.func.isRequired,onShowFeedback:r.func.isRequired,onViewComponent:r.func.isRequired,selectedComponentId:r.string},renderBreakDownItems(){const{props:e}=this;return n(e.components).map(((s,t)=>a.createElement(l,{index:t,key:s._id,component:s,isSelected:e.selectedComponentId===s._id,onViewBreakDown:e.onViewBreakDown,onShowFeedback:e.onShowFeedback,onViewComponent:e.onViewComponent,courseAssessment:e.courseAssessment})))},render(){const{courseAssessment:e}=this.props;return a.createElement(i,{className:"ev-course-assessment-results-breakdown"},a.createElement(c,{headingElement:`h${this.context}`,displayTitle:e.resultsBreakdownTitle,className:"ev-component-title",innerClassName:"ev-component-title-inner"}),a.createElement("ul",{className:"ev-course-assessment-results-breakdown-items ev-list-items",role:"tablist"},a.createElement(m.Provider,{value:this.context+1},this.renderBreakDownItems())))}});u.contextType=m,e.exports=u},61559:(e,s,t)=>{"use strict";const n=t(13980),o=t(2784),r=t(72779),a=t(11533),i=t(10817),c=t(86587),m=e=>{const s=o.useContext(c),t=s=>{s.preventDefault(),e.onShowFeedback(e.component)},n=()=>e.component.displayTitle||e.index+1;return o.createElement("li",{className:"ev-course-assessment-breakdown-item ev-list-item"},o.createElement("div",{className:"ev-course-assessment-breakdown-item-inner ev-list-item-inner"},o.createElement("div",{className:"ev-list-item-left"},o.createElement(a,{headingElement:`h${s}`,displayTitle:n(),className:"ev-course-assessment-breakdown-item-title",innerClassName:"ev-course-assessment-breakdown-item-title-inner ev-list-item-title"}),o.createElement("div",{className:"ev-course-assessment-breakdown-item-completed-text"},o.createElement(i,{className:"ev-course-assessment-breakdown-item-completed-text-inner",html:e.component._isComplete?e.courseAssessment.resultsBreakdownQuestionsCompletedText:e.courseAssessment.resultsComponentNotCompleteText}))),o.createElement("div",{className:"ev-list-item-right"},o.createElement(i,{element:"button",className:"ev-button ev-primary ev-course-assessment-breakdown-item-details-button",html:e.courseAssessment.resultsViewDetailedBreakdownText,disabled:!0!==e.component._isComplete,role:"tab",id:`${e.component._id}-detail-button`,"aria-controls":`${e.component._id}-breakdown`,"aria-expanded":e.isSelected,onClick:s=>{s.preventDefault(),e.onViewBreakDown(e.component)}}),o.createElement(i,{element:"button",className:"ev-button ev-primary ev-course-assessment-breakdown-item-view-button",role:"link",html:e.courseAssessment.resultsViewComponentText,onClick:s=>{s.preventDefault(),e.onViewComponent(e.component)}}))),o.createElement("div",{role:"tabpanel",id:`${e.component._id}-breakdown`,"aria-labelledby":`${e.component._id}-detail-button`,className:r("ev-course-assessment-breakdown-item-advanced ev-list-item-content",{"ev-display-none":!e.isSelected})},o.createElement("div",{className:"ev-course-assessment-breakdown-item-advanced-inner ev-list-item-content-inner"},o.createElement("div",{className:"ev-course-assessment-breakdown-item-details ev-clearfix"},o.createElement("div",{className:"ev-info-detail ev-course-assessment-breakdown-item-details-col"},o.createElement("div",{className:r("ev-info-detail-display ev-icon",{"ev-icon-cross":!e.component._isCorrect,"ev-icon-check":e.component._isCorrect})}),o.createElement(i,{className:"ev-info-detail-label",html:e.component._isCorrect?e.courseAssessment.resultsViewDetailedBreakdownCorrectText:e.courseAssessment.resultsViewDetailedBreakdownIncorrectText})),o.createElement("div",{className:"ev-info-detail ev-course-assessment-breakdown-item-details-col"},o.createElement("div",{className:"ev-info-detail-display"},(()=>{const{_attempts:s,_attemptsLeft:t}=e.component;return 0===t?"N/A":`${s-t}/${s}`})()),o.createElement(i,{className:"ev-info-detail-label",html:e.courseAssessment.resultsBreakdownAttemptsTakenText}))),o.createElement("div",{className:"ev-course-assessment-breakdown-item-advanced-title"},o.createElement(i,{className:"ev-course-assessment-breakdown-item-advanced-title-label",html:`${e.courseAssessment.resultsBreakdownTitleText}:`}),o.createElement(i,{className:"ev-course-assessment-breakdown-item-advanced-title-inner",html:n()})),o.createElement("div",{className:"ev-course-assessment-breakdown-item-advanced-body"},o.createElement(i,{className:"ev-course-assessment-breakdown-item-advanced-body-label",html:`${e.courseAssessment.resultsBreakdownBodyTitleText}:`}),o.createElement(i,{className:"ev-course-assessment-breakdown-item-advanced-body-inner",html:e.component.body})),(()=>{const{_canShowFeedback:s,_userFeedback:n}=e.component;if(s&&n)return o.createElement("div",{className:"ev-course-assessment-breakdown-item-advanced-feedback"},o.createElement(i,{element:"button",className:"ev-button ev-primary ev-course-assessment-breakdown-item-advanced-feedback-button",html:e.courseAssessment.resultsBreakdownFeedbackButton,onClick:t}))})())))};m.propTypes={component:n.object.isRequired,courseAssessment:n.object.isRequired,index:n.number.isRequired,isSelected:n.bool.isRequired,onViewBreakDown:n.func.isRequired,onShowFeedback:n.func.isRequired,onViewComponent:n.func.isRequired},e.exports=o.memo(m)},42602:(e,s,t)=>{"use strict";var n=t(14859)(t(58527));const o=t(13980),r=t(2784),a=t(11865),i=t(10817),c=t(86587),m=t(46666),l=t(448),u=e=>r.createElement("div",{className:"ev-course-assessment-results-dialog","aria-label":e.courseAssessment.ariaLabel},r.createElement(c.Provider,{value:2},(()=>{const{courseAssessment:s,titleTextAlignment:t}=e;if(s.completionNotifyTitle)return r.createElement(i,{element:"h2",id:"ev-prompt-title",className:"ev-prompt-title ev-focusable",style:{textAlign:t},html:s.completionNotifyTitle,tabIndex:"-1"})})(),(()=>{const{courseAssessment:s,bodyTextAlignment:t}=e;if(s.completionNotifyBody)return r.createElement(a,{id:"ev-prompt-body",className:"ev-prompt-body",style:{textAlign:t},body:s.completionNotifyBody,tabIndex:"-1"})})(),r.createElement(m,(0,n.default)({},e.courseAssessment,{components:e.components})),(()=>{if(e.courseAssessment._canBeRetaken)return r.createElement(l,{courseAssessment:e.courseAssessment,hideRetakeButton:!0})})()));u.propTypes={courseAssessment:o.object.isRequired,components:o.object.isRequired,titleTextAlignment:o.string,bodyTextAlignment:o.string},e.exports=r.memo(u)},47169:(e,s,t)=>{"use strict";const n=t(2784),o=t(72779),r=t(11865),a=t(11533),i=t(86587);e.exports=({title:e,body:s,_headerIcon:t,theme:c})=>{var m,l;const u=null===(m=c._extensions._courseAssessment)||void 0===m||null===(l=m._settings)||void 0===l?void 0:l._headerIcon,p=t||u,d=n.useContext(i);return n.createElement("div",{className:"ev-course-assessment-item-header ev-header"},n.createElement("div",{className:o("ev-course-assessment-item-inner ev-header-inner ev-clearfix",{"ev-no-graphic":!p})},n.createElement("div",{className:"ev-courseAssessment-item-left ev-header-left"},n.createElement(a,{headingElement:`h${d}`,displayTitle:e,className:"ev-header-title",innerClassName:"ev-header-title-inner"}),n.createElement(r,{className:"ev-header-body",innerClassName:"ev-header-body-inner",body:s})),p&&n.createElement("div",{className:"ev-course-assessment-item-right ev-header-right"},n.createElement("i",{className:`ev-icon ev-icon-${p}`}))))}},46666:(e,s,t)=>{"use strict";const n=t(72579),o=t(79421),r=t(19574),a=t(90882),i=t(36402),c=t(58335),m=t(2784),l=t(13980),u=t(72779),{connect:p}=t(57903),d=t(11865),v=t(11533),_=t(10817),h=t(86587),A=t(72489),C=t(49560),E=c({displayName:"CourseAssessmentResultsOverview",propTypes:{components:l.object.isRequired,completedComponentsCount:l.number,isComponentOverview:l.bool,isFullScreenOpen:l.bool,_isComplete:l.bool,_isPassed:l.bool,_showScoreAsPercentage:l.bool,_showQuestionsCompleted:l.bool,_showQuestionsCorrect:l.bool,_showAttemptsTaken:l.bool,incompleteFeedback:l.string,scoreText:l.string.isRequired,score:l.number.isRequired,resultsOverviewTitle:l.string.isRequired,progressDescription:l.string.isRequired,resultsQuestionsCorrect:l.string.isRequired,resultsViewAverageAttemptsTakenText:l.string.isRequired},getDefaultProps:()=>({_showScoreAsPercentage:!0,_showQuestionsCompleted:!0,_showQuestionsCorrect:!0,_showAttemptsTaken:!0}),getFeedback(){const{props:e}=this;return e._isComplete?n(e,["_feedback",e._isPassed?"passed":"failed"]):e.incompleteFeedback},getAverageAttempts(){const{props:e}=this;let s=0;return o(e.components,(e=>{if(!e._isComplete)return;const{_attempts:t,_attemptsLeft:n}=e,o=t-n;s+=r(o)?o:1})),Math.round(s/e.completedComponentsCount*100)/100||"N/A"},getCorrectComponentsCount(){return a(this.props.components,{_isComplete:!0,_isCorrect:!0}).length},renderScore(e){const{props:s}=this;if(!s._isComplete)return;const t=u("ev-icon ev-info-detail-display",{"ev-icon-cross":!s._isPassed,"ev-icon-check":s._isPassed}),n=s.score+(s._showScoreAsPercentage?"%":"");return e?m.createElement("div",{className:"ev-course-assessment-results-component-overview-results"},m.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},m.createElement("div",{className:"ev-info-detail"},m.createElement("div",{className:t})),m.createElement("div",{className:"ev-label"},m.createElement(_,{element:"span",html:s.scoreText})," ",m.createElement("b",null,n)))):m.createElement("div",{className:"ev-info-detail"},m.createElement("div",{className:t}),m.createElement("div",{className:"ev-info-detail-label"},m.createElement(_,{element:"span",html:s.scoreText})," ",m.createElement("b",null,n)))},renderResultsDetail(e){const{_showQuestionsCompleted:s,_showQuestionsCorrect:t,_showAttemptsTaken:n}=this.props;if(s||t||n)return e?m.createElement("div",{className:"ev-course-assessment-results-component-overview-results"},this.renderQuestionsCompleted(!0),this.renderQuestionsCorrect(!0),this.renderAttempts(!0)):m.createElement("div",{className:"ev-content-row ev-course-assessment-results-roundup"},m.createElement("div",{className:"ev-content-row-inner ev-clearfix"},this.renderQuestionsCompleted(),this.renderQuestionsCorrect(),this.renderAttempts()))},renderQuestionsCompleted(e){const{props:s}=this;if(s._showQuestionsCompleted)return e?m.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},m.createElement(C,{key:s.completedComponentsCount,componentsCount:i(s.components),completedComponentsCount:s.completedComponentsCount}),m.createElement(_,{className:"ev-label",html:s.progressDescription})):m.createElement("div",{className:"ev-course-assessment-results-progress ev-course-assessment-results-roundup-col"},m.createElement(C,{key:s.isFullScreenOpen,componentsCount:i(s.components),completedComponentsCount:s.completedComponentsCount}),m.createElement(_,{className:"ev-course-assessment-results-progress-text ev-info-graph-label",html:s.progressDescription}))},renderQuestionsCorrect(e){const{props:s}=this;if(!s._showQuestionsCorrect)return;const t=`${this.getCorrectComponentsCount()} / ${i(s.components)}`;return e?m.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},m.createElement("div",{className:"ev-info-detail"},m.createElement("div",{className:"ev-info-detail-display"},t)),m.createElement(_,{className:"ev-label",html:s.resultsQuestionsCorrect})):m.createElement("div",{className:"ev-course-assessment-results-questions ev-course-assessment-results-roundup-col"},m.createElement("div",{className:"ev-course-assessment-results-questions-inner ev-info-detail"},m.createElement("div",{className:"ev-course-assessment-results-question-result ev-info-detail-display"},t),m.createElement(_,{className:"ev-course-assessment-results-question-text ev-info-detail-label",html:s.resultsQuestionsCorrect})))},renderAttempts(e){const{props:s}=this;if(s._showAttemptsTaken)return e?m.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},m.createElement("div",{className:"ev-info-detail"},m.createElement("div",{className:"ev-info-detail-display"},this.getAverageAttempts())),m.createElement(_,{className:"ev-label",html:s.resultsViewAverageAttemptsTakenText})):m.createElement("div",{className:"ev-course-assessment-results-attempts ev-course-assessment-results-roundup-col"},m.createElement("div",{className:"ev-course-assessment-results-attempts-inner ev-info-detail"},m.createElement("div",{className:"ev-course-assessment-results-attempts-result ev-info-detail-display"},this.getAverageAttempts()),m.createElement(_,{className:"ev-course-assessment-results-attempts-text ev-info-detail-label",html:s.resultsViewAverageAttemptsTakenText})))},renderComponentOverview(){const{props:e}=this;return m.createElement("div",{className:"ev-course-assessment-results-component-overview"},m.createElement(v,{headingElement:`h${this.context+1}`,displayTitle:e.resultsOverviewTitle,className:"ev-component-title",innerClassName:"ev-component-title-inner"}),this.renderScore(!0),m.createElement(d,{className:"ev-component-body",innerClassName:"ev-component-body-inner",body:this.getFeedback()}),this.renderResultsDetail(!0))},render(){const{props:e}=this;return e.isComponentOverview?this.renderComponentOverview():m.createElement(A,{className:"ev-course-assessment-results-overview"},m.createElement(v,{headingElement:`h${this.context}`,displayTitle:e.resultsOverviewTitle,className:"ev-component-title",innerClassName:"ev-component-title-inner"}),m.createElement("div",{className:"ev-content-row"},m.createElement("div",{className:"ev-content-row-inner"},this.renderScore(),m.createElement(d,{className:"ev-course-assessment-results-overview-status-feedback  ev-content-body",innerClassName:"ev-course-assessment-results-overview-status-feedback-inner ev-content-body-inner",body:this.getFeedback()}))),this.renderResultsDetail())}});E.contextType=h,e.exports=p((({fullScreen:e})=>({isFullScreenOpen:e.isOpen})))(E)},448:(e,s,t)=>{"use strict";const n=t(2784),o=t(13980),r=t(23346),a=t(11533),i=t(86587),c=t(72489),m=e=>{const s=n.useContext(i),t=s=>{s.preventDefault(),e.onRetakeAssessment()},o=()=>{const{retakeAttemptsPrefixText:s,retakeAttemptsTaken:t,_retakeAttempts:n,_allowUnlimitedRetakeAttempts:o}=e.courseAssessment;return o?`${s}: ${t}`:`${s}: ${t}/${n}`},m=()=>{const{retakeAttemptsTaken:s,_retakeAttempts:o,retakeAssessmentButtonText:a,_allowUnlimitedRetakeAttempts:i,_shouldHideRetakeOnAssessmentPassed:c,_isPassed:m}=e.courseAssessment;if(!(e.hideRetakeButton||c&&m)&&(s!==o||i))return n.createElement("div",{className:"ev-course-assessment-results-overview-reset"},n.createElement("div",{className:"ev-course-assessment-results-overview-reset-inner"},n.createElement(r,{onClick:t,variant:"warning",text:a})))};return e.isComponentRetake?n.createElement("div",{className:"ev-course-assessment-results-component-overview-retake"},n.createElement("div",{className:"ev-label"},o()),m()):n.createElement(c,null,n.createElement(a,{headingElement:`h${s}`,displayTitle:o(),className:"ev-component-title",innerClassName:"ev-component-title-inner"}),m())};m.propTypes={courseAssessment:o.object.isRequired,onRetakeAssessment:o.func,hideRetakeButton:o.bool,isComponentRetake:o.bool},e.exports=n.memo(m)},1976:(e,s,t)=>{"use strict";const n=t(72579),o=t(2784);e.exports=o.memo((({item:e,status:s})=>{if("page"!==e._type||!n(e,"_courseAssessment._isAssessmentPage")||!n(e._courseAssessment,["_assessmentStatusLabel",s,"label"]))return null;const{label:t,icon:r}=e._courseAssessment._assessmentStatusLabel[s];return o.createElement("div",{className:"ev-course-assessment-status-label ev-menu-item-completion"},o.createElement("div",{className:"ev-course-assessment-status-label-inner ev-menu-item-completion-inner"},r&&o.createElement("i",{className:`ev-menu-item-completion-icon ev-icon ev-icon-${r}`}),o.createElement("span",null,t)))}))},57587:(e,s,t)=>{"use strict";const n=t(58335),o=t(2784),{connect:r}=t(57903),{addPrompt:a}=t(90672),{showConfirmResetDialog:i}=t(36580),{courseAssessmentSelector:c,courseAssessmentComponentsSelector:m}=t(34956),l=t(57005),u=n({displayName:"CourseAssessmentResultsViewContainer",render(){return o.createElement(l,this.props)}});e.exports=r((e=>({theme:e.theme,course:e.course,courseAssessment:c(e),components:m(e),isReady:e.location.isLocationReady})),{showConfirmResetDialog:i,addPrompt:a})(u)},56219:(e,s,t)=>{"use strict";const n=t(58335),o=t(2784),{connect:r}=t(57903),{courseAssessmentSelector:a,courseAssessmentComponentsSelector:i}=t(34956),c=t(42602),m=n({displayName:"CourseAssessmentResultsDialogContainer",render(){return o.createElement(c,this.props)}});e.exports=r((e=>({courseAssessment:a(e),components:i(e)})))(m)},50869:(e,s,t)=>{"use strict";const{connect:n}=t(57903),{courseAssessmentStatusSelector:o}=t(34956),r=t(1976);e.exports=n((e=>({status:o(e)})))(r)},66656:(e,s,t)=>{"use strict";const{registerEpics:n,registerReducer:o}=t(90876),r=t(6443),a=t(64147),{registerElementsEpic:i,registerAssessmentComponentFeedbackEpic:c,registerTrackingMapEpic:m,evaluateAssessmentOnComponentCompletedEpic:l,courseAssessmentCompleteEpic:u,showAssessmentCompletedPromptEpic:p,confirmResetAssessmentDialogEpic:d,setupRetakeAssessmentEpic:v,setVariableOnScoreChangedEpic:_,setVariableOnAssessmentCompletedEpic:h}=t(56074);n(i,c,m,l,u,p,d,v,_,h,r("courseAssessment")),o("courseAssessment",a)},21476:(e,s,t)=>{"use strict";const n=t(20340);e.exports=function(e,s,t,o,r,a,i,c,m,l,u,p,d,v){const _=n(e,s,t);_.customAttributes.arc=function(e,s,t,n,o){const r=360/n*t,a=(90-r)*Math.PI/180,i=e+o*Math.cos(a),c=s-o*Math.sin(a);return{path:n===t?[["M",e,s-o],["A",o,o,0,1,1,e-.01,s-o]]:[["M",e,s-o],["A",o,o,0,+(r>180),1,i,c]]}},_.text(s/2,t/2,a).attr({"font-size":i,fill:v,"font-weight":"bold"}),_.circle(s/2,t/2,m).attr({stroke:p,"stroke-width":u}),_.path().attr({stroke:d,"stroke-width":l,arc:[s/2,t/2,0,r,c]}).rotate(0,0,0).animate({arc:[s/2,t/2,o,r,c]},1900)}},56074:(e,s,t)=>{"use strict";const n=t(72579),o=t(58215),r=t(90882),a=t(85395),i=t(17620),c=t(60019),m=t(92191),l=t(98874),{Observable:u}=t(28761),p=t(2784),d=t(45630),{asap:v}=t(1127),{SETUP_APP:_}=t(63444),{COMPONENT_COMPLETED:h,COMPONENTS_UPDATED:A,OVERWRITE_COMPONENTS:C,updateComponents:E,SETUP_COMPONENT:b,SETUP_ANSWER_STATE:k}=t(29933),{addPrompt:N}=t(90672),{addElement:g}=t(51777),f=t(63955),{trackableChange:w}=t(59828),{NavigationSideItem:S}=t(39819),{registerTrackingMap:y}=t(90876),T=t(63867),R=t(36998),x=t(98471),O=t(67718),{updateVariable:P}=t(66376),I=t(24156),{evaluateCourseAssessment:D,courseAssessmentComplete:B,courseAssessmentComponentsReset:M,courseAssessmentReset:V,EVALUATE_COURSE_ASSESSMENT:q,COURSE_ASSESSMENT_COMPLETE:F,SETUP_COURSE_ASSESSMENT_RETAKE:U,SHOW_COURSE_ASSESSMENT_CONFIRM_RESET_DIALOG:L}=t(36580),$=t(57587),Q=t(56219),j=t(50869),H=t(97646),K=(e,s)=>O(e,"_courseAssessment",s);s.registerElementsEpic=(e,s)=>e.filter(K(_,s)).mergeMap((()=>{const{course:e,components:t}=s.getState(),r=e._courseAssessment,a=I(r,t),i=[];if(i.push(g({parent:"menuItem",position:"content",name:"courseAssessment",component:j,props:{}})),r._shouldDisableAssessmentCompletedPopup||i.push(g({parent:"navigationSide",name:"courseAssessment",component:S,props:{link:"/courseAssessment/showResults",icon:x("_courseAssessment","_navigationIcon","pie-chart"),label:r.title}}),g({parent:"router",name:"courseAssessment",component:$,path:"/courseAssessment/showResults",exact:!0,getShouldPersist:e=>n(e,"course._courseAssessment._isEnabled",!1)})),r._shouldDisableQuestionFeedback){const e=o(a,((e,s)=>(e[s._id]={_canShowFeedback:!1},e)),{});i.push(E(e))}return u.of(...i)})),s.registerAssessmentComponentFeedbackEpic=(e,s)=>e.filter(K([_,C],s)).mergeMap((()=>{const{course:e,components:t}=s.getState(),n=e._courseAssessment,r=I(n,t);if(n._shouldDisableQuestionFeedback){const e=o(r,((e,s)=>(e[s._id]={_canShowFeedback:!1},e)),{});return u.of(E(e))}return u.empty()})),s.registerTrackingMapEpic=(e,s)=>e.filter(K(_,s)).do((()=>{y("courseAssessment",H,"extensions")})).ignoreElements(),s.evaluateAssessmentOnComponentCompletedEpic=(e,s)=>e.filter((e=>{if(!K(h,s)(e))return!1;const{courseAssessment:t}=s.getState();if(t._isComplete)return!1;const{componentId:n}=e.payload;return-1!==t.componentIds.indexOf(n)})).map((()=>D(s.getState()))),s.courseAssessmentCompleteEpic=(e,s)=>e.filter((e=>e.type===q&&s.getState().courseAssessment._isComplete)).mergeMap((()=>u.of(B(s.getState()),w()))),s.setVariableOnScoreChangedEpic=(e,s)=>e.ofType(q,F,A).filter((()=>{const{app:e,course:{_courseAssessment:t}}=s.getState();return e.hasAppStarted&&t&&t._isEnabled&&t._canSaveToVariable&&t._variableId&&t._canSaveToVariableOnScoreChange})).map((()=>s.getState().courseAssessment.score)).distinctUntilChanged().map((e=>{const{course:{_courseAssessment:t}}=s.getState();return P(t._variableId,e,t._variableUpdateType)})),s.setVariableOnAssessmentCompletedEpic=(e,s)=>e.ofType(q,F,A).filter((()=>{const{app:e,course:{_courseAssessment:t}}=s.getState();return e.hasAppStarted&&t&&t._isEnabled&&t._canSaveToVariable&&t._variableId&&!t._canSaveToVariableOnScoreChange})).map((()=>s.getState().courseAssessment._isComplete)).distinctUntilChanged().filter((e=>e)).map((()=>s.getState().courseAssessment.score)).distinctUntilChanged().map((e=>{const{course:{_courseAssessment:t}}=s.getState();return P(t._variableId,e,t._variableUpdateType)})),s.showAssessmentCompletedPromptEpic=(e,s)=>e.ofType(F).mergeMap((()=>{const{course:e,courseAssessment:t}=s.getState();if(e._courseAssessment._shouldDisableAssessmentCompletedPopup)return u.empty();let o={title:e._courseAssessment.completionNotifyTitle,body:e._courseAssessment.completionNotifyBody,_class:"course-assessment-notify",_actions:[],_glyph:{_type:"progressCircle",_percentage:t.score}};return e._courseAssessment._shouldDisplayOverviewInPopup&&(o={_component:p.createElement(Q,null),title:e._courseAssessment.completionNotifyTitle,body:e._courseAssessment.completionNotifyBody,_actions:[]}),n(e._courseAssessment,"_showAssessmentLinkInPopup",!0)&&o._actions.push({text:e._courseAssessment.title,_link:{_link:"courseAssessment/showResults",_linkType:"extensions"}}),!(e._courseAssessment._canBeRetaken&&e._courseAssessment._shouldShowRetakeAssessmentInPopup&&(e._courseAssessment._allowUnlimitedRetakeAttempts||t.retakeAttemptsTaken<e._courseAssessment._retakeAttempts))||t._isPassed&&e._courseAssessment._shouldHideRetakeOnAssessmentPassed||o._actions.push({text:e._courseAssessment.retakeAssessmentButtonText,_type:L}),u.of(N(o))})),s.confirmResetAssessmentDialogEpic=(e,s)=>e.filter(K(L,s)).map((()=>{const e=s.getState().course._courseAssessment,t={title:e.retakeAssessmentNotifyTitle,body:e.retakeAssessmentNotifyBody,_action:{text:e.retakeAssessmentNotifyConfirmButtonText,_type:U},_dismiss:{text:e.retakeAssessmentNotifyCancelButtonText}};return N(t)})),s.setupRetakeAssessmentEpic=(e,s,{Api:t})=>e.ofType(U).mergeMap((()=>u.concat(u.of(V()),t.fetchComponents().map((e=>{const{courseAssessment:t,course:o,components:l}=s.getState(),u=n(o._courseAssessment,"_onlyResetIncorrect",!1),p=a((e=>i(e,"_attempts")),(e=>c({},e,function(e){const s={_isEnabled:!0,_isCorrect:!1,_isPartlyCorrect:!1,_isComplete:!1,_isSubmitted:!1,_hasUserAnswered:!1,_userAnswer:void 0,_attemptsLeft:void 0,_userFeedback:void 0};return"branching"===e._component&&(s._currentItemId=void 0,s._previousItems=[],s._score=0),s}(e))),(e=>f(e,{type:b,component:e,originalComponent:e})),(e=>f(e,{type:k,component:e,originalComponent:e}))),d=m(e).keyBy("_id").pick(u?r(t.componentIds,(e=>!l[e]._isCorrect)):t.componentIds).mapValues(p).value();return E(d)})),u.of(M(),v).do((()=>l((()=>{const e=s.getState(),{course:t,components:o}=e,r=t._courseAssessment,a=n(r,"_retakeNavigation","COURSE");if("COURSE"===a)d.replace("/");else if("ASSESSMENT_FIRST_QUESTION"===a||"ASSESSMENT_FIRST_QUESTION_PAGE"===a){const s=I(r,o),t=T(e,s[0],"page");let n=`/page/${t._id}`;"ASSESSMENT_FIRST_QUESTION"===a&&(n=`/page/${t._id}?element=${s[0]._id}`),d.replace(n)}if("LINK"===a){const e=n(r,"_retakeNavigationLink",{});e&&("course"===e._linkType?d.replace("/"):"extensions"===e._linkType||"additionalContent"===e._linkType?d.replace(`/${e._link}`):R(e._link))}})))))))},24156:(e,s,t)=>{"use strict";const n=t(90882),o=t(37936);e.exports=({_shouldIncludeAllQuestions:e},s)=>n(s,o(e?"_isQuestionType":"_courseAssessment._isEnabled",!0))},64147:(e,s,t)=>{"use strict";const n=t(16760),o=t(36402),r=t(13888),a=t(79421),{SETUP_APP:i,APP_READY:c}=t(63444),{COMPONENTS_UPDATED:m}=t(29933),{RESTORE_EXTENSION:l}=t(59828),u=t(24156),{EVALUATE_COURSE_ASSESSMENT:p,COURSE_ASSESSMENT_RESET:d,COURSE_ASSESSMENT_COMPLETE:v}=t(36580),_={_isEnabled:!1,_isComplete:!1,_isPassed:!1,_progress:0,_shouldHideMarking:!1,componentsCount:0,completedComponentsCount:0,correctComponentsCount:0,retakeAttemptsTaken:0,totalAttemptsTaken:0,score:0,componentIds:[],_hasLoadedFromScorm:!1};function h(e,s){if(!e._isEnabled)return e;const{components:t,course:n}=s.payload,i=n._courseAssessment._passPercentage,c=r(t,e.componentIds),m=o(c);let l=0,u=0;a(c,(e=>{e._isComplete&&(l+=1,e._isCorrect&&(u+=1))}));const p=Math.round(u/m*100),d=m===l,v=d&&p>=i,_=100/m*l;return{...e,_isComplete:d,_isPassed:v,_progress:_,score:p,componentsCount:m,completedComponentsCount:l,correctComponentsCount:u}}e.exports=(e=_,s)=>{switch(s.type){case i:return function(e,s){const{course:t,components:r}=s.payload,a=t._courseAssessment;if(a&&a._isEnabled){const s=u(a,r),t=n(s,(e=>e._id)),i=o(s);return{...e,_isEnabled:!0,_shouldHideMarking:a._shouldHideMarking,componentIds:t,componentsCount:i,retakeAttemptsTaken:0,totalAttemptsTaken:0}}return _}(e,s);case c:return function(e,s){if(!e._isEnabled)return e;const{scorm:t}=s.payload;return t&&t._isEnabled&&!e._hasLoadedFromScorm&&(e=t.suspendData&&void 0!==t.suspendData._assessmentAttemptsTaken?{...e,retakeAttemptsTaken:t.suspendData._assessmentAttemptsTaken,_hasLoadedFromScorm:!0}:{...e,_hasLoadedFromScorm:!0}),h(e,s)}(e,s);case p:case m:return h(e,s);case d:return{...e,retakeAttemptsTaken:e.retakeAttemptsTaken+1};case v:return{...e,totalAttemptsTaken:e.totalAttemptsTaken+1};case l:if("courseAssessment"===s.payload.extensionName)return{...e,...s.payload.extensionData};default:return e}}},34956:(e,s,t)=>{"use strict";const n=t(60019),o=t(13888),{createSelector:r}=t(60985),a=e=>e.courseAssessment;s.courseAssessmentSelector=r([e=>e.course._courseAssessment,a],((e={},s={})=>n({},e,s))),s.courseAssessmentComponentsSelector=r([a,e=>e.components],((e,s)=>e?o(s,e.componentIds):{})),s.courseAssessmentStatusSelector=r(a,(e=>e._isComplete?e._isPassed?"pass":"fail":"incomplete"))},97646:e=>{"use strict";e.exports={_isComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0},_isPassed:{fieldKey:"_isPassed",type:"Boolean",shouldRestore:!0,shouldStoreOnTopLevel:!0},_assessmentAttemptsTaken:{fieldKey:"retakeAttemptsTaken",type:"Number",shouldRestore:!0,shouldStoreOnTopLevel:!0},_totalAssessmentAttemptsTaken:{fieldKey:"totalAttemptsTaken",type:"Number",shouldRestore:!0,shouldStoreOnTopLevel:!0},_score:{fieldKey:"score",type:"Number",shouldRestore:!0},_progress:{fieldKey:"_progress",type:"Number",shouldRestore:!0},_isAssessmentComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!1,shouldStoreOnTopLevel:!0},_assessmentCompletedQuestionsCount:{fieldKey:"completedComponentsCount",type:"Number",shouldRestore:!1,shouldStoreOnTopLevel:!0},_assessmentCorrectQuestionsCount:{fieldKey:"correctComponentsCount",type:"Number",shouldRestore:!1,shouldStoreOnTopLevel:!0}}},67718:(e,s,t)=>{"use strict";const n=t(72579);e.exports=(e,s,t)=>(Array.isArray(e)||(e=[e]),({type:o})=>-1!==e.indexOf(o)&&n(t.getState(),["course",s,"_isEnabled"],!1))},98471:(e,s,t)=>{"use strict";const n=t(72579),{store:o}=t(90876);e.exports=function(e,s,t){const{course:r,theme:a}=o.getState(),i=r[e],c=n(i,s),m=n(a,["_extensions",e,"_settings",s]);return c||m||t}},6443:(e,s,t)=>{"use strict";const n=t(72579),{Observable:o}=t(28761),{setLocationReadyState:r,PUSH_LOCATION:a}=t(63444),i=t(36151),c=t(69610);e.exports=(e,s)=>(t,m)=>t.filter((({type:s})=>{if(s!==a)return;const{navigationStatus:t,path:n}=m.getState().location;return"plugin"===t&&n[0]===e})).switchMap((()=>{const t=m.getState(),{device:a,course:l}=t;let u;if(u=s?s(t):n(l,[`_${e}`,"_heroImage"]),!u||!u._graphic)return o.empty();const p=i(u._graphic.src,u._graphic.srcAdvanced,!0);return p?o.concat(o.of(r(!1)),o.bindCallback(c)(p,!1).map((()=>r(!0)))):o.empty()}))},37936:(e,s,t)=>{var n=t(18874),o=t(74716);e.exports=function(e,s){return o(e,n(s,1))}}}]);