"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5011],{85814:(e,s,t)=>{var n=t(39322),o=t(14859)(t(58527));const r=t(98923),i=t(58335),c=t(13980),a=t(2784),l=t(28316),{connect:m}=t(57903),{Component:p}=t(58720),u=t(96235),d=t(88934),v=t(43855),h=t(10817),C=t(86587),{courseAssessmentSelector:b,courseAssessmentComponentsSelector:w}=t(34956),E=t(46666),A=t(448),{showConfirmResetDialog:_}=t(36580),f=i({displayName:"CourseAssessmentResults",propTypes:{component:c.object.isRequired,components:c.object.isRequired,courseAssessment:c.object,setComponentAsReady:c.func.isRequired,setComponentAsViewed:c.func.isRequired,setComponentAsStarted:c.func.isRequired,setComponentAsComplete:c.func.isRequired,styles:c.object,showConfirmResetDialog:c.func},componentDidMount(){this.props.setComponentAsReady(this.props.component._id)},UNSAFE_componentWillReceiveProps({courseAssessment:e}){const{props:s}=this;s.component._scrollIntoViewOnComplete&&!s.courseAssessment._isComplete&&e._isComplete&&r((()=>{const e=l.findDOMNode(this);n(e).scrollintoview({duration:600,direction:"vertical"})}),300)},onVisibilityChange(...e){v(...e,this,this.props.setComponentAsStarted)},renderIncompleteFeedback(){const{component:e,courseAssessment:s}=this.props;if(!e._showIncompleteFeedback||s._isComplete)return;const t=e.displayTitle?this.context+1:this.context;return a.createElement("div",{className:"ev-course-assessment-results-incomplete-feedback"},a.createElement("div",{className:"ev-component-title"},a.createElement(h,{element:`h${t}`,className:"ev-component-title-inner",html:s.resultsOverviewTitle})),a.createElement("div",{className:"ev-component-body"},a.createElement(h,{className:"ev-component-body-inner",html:s.incompleteFeedback})))},renderOverview(){const{component:e,courseAssessment:s,components:t}=this.props;if(!e._showIncompleteFeedback||s._isComplete)return a.createElement(E,(0,o.default)({},s,{components:t,isComponentOverview:!0}))},renderRetake(){const{component:e,courseAssessment:s,showConfirmResetDialog:t}=this.props;if((!e._showIncompleteFeedback||s._isComplete)&&(e._alwaysShowRetakeButton||s._isComplete)&&s._canBeRetaken)return a.createElement(A,{courseAssessment:s,onRetakeAssessment:t,hideRetakeButton:!1,isComponentRetake:!0})},renderResults(){return this.props.courseAssessment._isEnabled?a.createElement("div",{className:"ev-course-assessment-results-component-overview-container"},this.renderIncompleteFeedback(),this.renderOverview(),this.renderRetake()):a.createElement("h4",null,"The Course Assessment Results Component requires the Course Assessment extension to be enabled.")},render(){const{props:e}=this;return a.createElement(p,{component:e.component,styles:e.styles,isVisibilitySensorActive:d(e),onVisibilityChange:this.onVisibilityChange},a.createElement("div",{className:u(e.component)},this.renderResults()))}});f.contextType=C,e.exports=m((e=>({courseAssessment:b(e),components:w(e)})),{showConfirmResetDialog:_})(f)},14579:(e,s,t)=>{const{registerComponent:n,registerEpics:o}=t(90876),r=t(85814),i=t(81089),{assessmentCompletedEpic:c}=t(69425);o(c),n("courseAssessmentResults",{component:r,trackingMap:i})},69425:(e,s,t)=>{const n=t(92191),{Observable:o}=t(28761),{setComponentAsComplete:r}=t(29933);s.assessmentCompletedEpic=(e,s)=>e.ofType("COURSE_ASSESSMENT_COMPLETE").mergeMap((()=>{const{components:e}=s.getState(),t=n(e).filter((e=>"courseAssessmentResults"===e._component)).map((e=>r(e._id))).value();return o.of(...t)}))},81089:e=>{e.exports={_interactionType:{type:"String",default:"presentation",shouldRestore:!1}}},49560:(e,s,t)=>{const n=t(58335),o=t(13980),r=t(2784),i=t(28316),{connect:c}=t(57903),a=t(60309),l=t(21476),m=n({displayName:"CourseAssessmentProgressCircle",propTypes:{variables:o.object.isRequired,componentsCount:o.number.isRequired,completedComponentsCount:o.number.isRequired,swatches:o.object},getDefaultProps:()=>({completedComponentsCount:0}),componentDidMount(){const e=i.findDOMNode(this),{variables:s,componentsCount:t,completedComponentsCount:n,swatches:o}=this.props,r=a(s["@chart-background-color"],o),c=a(s["@chart-highlight-color"],o),m=a(s["@chart-text-color"],o),p=`${Math.round(n/t*100)}%`;l(e,80,80,n,t,p,18,38,38,4,4,r,c,m)},render:()=>r.createElement("div",{className:"ev-course-assessment-results-stats-progress-canvas"})});e.exports=c((e=>({variables:e.theme._chart._variables,swatches:e.theme._swatches})))(m)},46666:(e,s,t)=>{const n=t(72579),o=t(79421),r=t(19574),i=t(90882),c=t(36402),a=t(58335),l=t(2784),m=t(13980),p=t(72779),{connect:u}=t(57903),d=t(11865),v=t(11533),h=t(10817),C=t(86587),b=t(72489),w=t(49560),E=a({displayName:"CourseAssessmentResultsOverview",propTypes:{components:m.object.isRequired,completedComponentsCount:m.number,isComponentOverview:m.bool,isFullScreenOpen:m.bool,_isComplete:m.bool,_isPassed:m.bool,_showScoreAsPercentage:m.bool,_showQuestionsCompleted:m.bool,_showQuestionsCorrect:m.bool,_showAttemptsTaken:m.bool,incompleteFeedback:m.string,scoreText:m.string.isRequired,score:m.number.isRequired,resultsOverviewTitle:m.string.isRequired,progressDescription:m.string.isRequired,resultsQuestionsCorrect:m.string.isRequired,resultsViewAverageAttemptsTakenText:m.string.isRequired},getDefaultProps:()=>({_showScoreAsPercentage:!0,_showQuestionsCompleted:!0,_showQuestionsCorrect:!0,_showAttemptsTaken:!0}),getFeedback(){const{props:e}=this;return e._isComplete?n(e,["_feedback",e._isPassed?"passed":"failed"]):e.incompleteFeedback},getAverageAttempts(){const{props:e}=this;let s=0;return o(e.components,(e=>{if(!e._isComplete)return;const{_attempts:t,_attemptsLeft:n}=e,o=t-n;s+=r(o)?o:1})),Math.round(s/e.completedComponentsCount*100)/100||"N/A"},getCorrectComponentsCount(){return i(this.props.components,{_isComplete:!0,_isCorrect:!0}).length},renderScore(e){const{props:s}=this;if(!s._isComplete)return;const t=p("ev-icon ev-info-detail-display",{"ev-icon-cross":!s._isPassed,"ev-icon-check":s._isPassed}),n=s.score+(s._showScoreAsPercentage?"%":"");return e?l.createElement("div",{className:"ev-course-assessment-results-component-overview-results"},l.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},l.createElement("div",{className:"ev-info-detail"},l.createElement("div",{className:t})),l.createElement("div",{className:"ev-label"},l.createElement(h,{element:"span",html:s.scoreText})," ",l.createElement("b",null,n)))):l.createElement("div",{className:"ev-info-detail"},l.createElement("div",{className:t}),l.createElement("div",{className:"ev-info-detail-label"},l.createElement(h,{element:"span",html:s.scoreText})," ",l.createElement("b",null,n)))},renderResultsDetail(e){const{_showQuestionsCompleted:s,_showQuestionsCorrect:t,_showAttemptsTaken:n}=this.props;if(s||t||n)return e?l.createElement("div",{className:"ev-course-assessment-results-component-overview-results"},this.renderQuestionsCompleted(!0),this.renderQuestionsCorrect(!0),this.renderAttempts(!0)):l.createElement("div",{className:"ev-content-row ev-course-assessment-results-roundup"},l.createElement("div",{className:"ev-content-row-inner ev-clearfix"},this.renderQuestionsCompleted(),this.renderQuestionsCorrect(),this.renderAttempts()))},renderQuestionsCompleted(e){const{props:s}=this;if(s._showQuestionsCompleted)return e?l.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},l.createElement(w,{key:s.completedComponentsCount,componentsCount:c(s.components),completedComponentsCount:s.completedComponentsCount}),l.createElement(h,{className:"ev-label",html:s.progressDescription})):l.createElement("div",{className:"ev-course-assessment-results-progress ev-course-assessment-results-roundup-col"},l.createElement(w,{key:s.isFullScreenOpen,componentsCount:c(s.components),completedComponentsCount:s.completedComponentsCount}),l.createElement(h,{className:"ev-course-assessment-results-progress-text ev-info-graph-label",html:s.progressDescription}))},renderQuestionsCorrect(e){const{props:s}=this;if(!s._showQuestionsCorrect)return;const t=`${this.getCorrectComponentsCount()} / ${c(s.components)}`;return e?l.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},l.createElement("div",{className:"ev-info-detail"},l.createElement("div",{className:"ev-info-detail-display"},t)),l.createElement(h,{className:"ev-label",html:s.resultsQuestionsCorrect})):l.createElement("div",{className:"ev-course-assessment-results-questions ev-course-assessment-results-roundup-col"},l.createElement("div",{className:"ev-course-assessment-results-questions-inner ev-info-detail"},l.createElement("div",{className:"ev-course-assessment-results-question-result ev-info-detail-display"},t),l.createElement(h,{className:"ev-course-assessment-results-question-text ev-info-detail-label",html:s.resultsQuestionsCorrect})))},renderAttempts(e){const{props:s}=this;if(s._showAttemptsTaken)return e?l.createElement("div",{className:"ev-course-assessment-results-component-overview-results-item"},l.createElement("div",{className:"ev-info-detail"},l.createElement("div",{className:"ev-info-detail-display"},this.getAverageAttempts())),l.createElement(h,{className:"ev-label",html:s.resultsViewAverageAttemptsTakenText})):l.createElement("div",{className:"ev-course-assessment-results-attempts ev-course-assessment-results-roundup-col"},l.createElement("div",{className:"ev-course-assessment-results-attempts-inner ev-info-detail"},l.createElement("div",{className:"ev-course-assessment-results-attempts-result ev-info-detail-display"},this.getAverageAttempts()),l.createElement(h,{className:"ev-course-assessment-results-attempts-text ev-info-detail-label",html:s.resultsViewAverageAttemptsTakenText})))},renderComponentOverview(){const{props:e}=this;return l.createElement("div",{className:"ev-course-assessment-results-component-overview"},l.createElement(v,{headingElement:`h${this.context+1}`,displayTitle:e.resultsOverviewTitle,className:"ev-component-title",innerClassName:"ev-component-title-inner"}),this.renderScore(!0),l.createElement(d,{className:"ev-component-body",innerClassName:"ev-component-body-inner",body:this.getFeedback()}),this.renderResultsDetail(!0))},render(){const{props:e}=this;return e.isComponentOverview?this.renderComponentOverview():l.createElement(b,{className:"ev-course-assessment-results-overview"},l.createElement(v,{headingElement:`h${this.context}`,displayTitle:e.resultsOverviewTitle,className:"ev-component-title",innerClassName:"ev-component-title-inner"}),l.createElement("div",{className:"ev-content-row"},l.createElement("div",{className:"ev-content-row-inner"},this.renderScore(),l.createElement(d,{className:"ev-course-assessment-results-overview-status-feedback  ev-content-body",innerClassName:"ev-course-assessment-results-overview-status-feedback-inner ev-content-body-inner",body:this.getFeedback()}))),this.renderResultsDetail())}});E.contextType=C,e.exports=u((({fullScreen:e})=>({isFullScreenOpen:e.isOpen})))(E)},448:(e,s,t)=>{const n=t(2784),o=t(13980),r=t(23346),i=t(11533),c=t(86587),a=t(72489),l=e=>{const s=n.useContext(c),t=s=>{s.preventDefault(),e.onRetakeAssessment()},o=()=>{const{retakeAttemptsPrefixText:s,retakeAttemptsTaken:t,_retakeAttempts:n,_allowUnlimitedRetakeAttempts:o}=e.courseAssessment;return o?`${s}: ${t}`:`${s}: ${t}/${n}`},l=()=>{const{retakeAttemptsTaken:s,_retakeAttempts:o,retakeAssessmentButtonText:i,_allowUnlimitedRetakeAttempts:c,_shouldHideRetakeOnAssessmentPassed:a,_isPassed:l}=e.courseAssessment;if(!(e.hideRetakeButton||a&&l)&&(s!==o||c))return n.createElement("div",{className:"ev-course-assessment-results-overview-reset"},n.createElement("div",{className:"ev-course-assessment-results-overview-reset-inner"},n.createElement(r,{onClick:t,variant:"warning",text:i})))};return e.isComponentRetake?n.createElement("div",{className:"ev-course-assessment-results-component-overview-retake"},n.createElement("div",{className:"ev-label"},o()),l()):n.createElement(a,null,n.createElement(i,{headingElement:`h${s}`,displayTitle:o(),className:"ev-component-title",innerClassName:"ev-component-title-inner"}),l())};l.propTypes={courseAssessment:o.object.isRequired,onRetakeAssessment:o.func,hideRetakeButton:o.bool,isComponentRetake:o.bool},e.exports=n.memo(l)},21476:(e,s,t)=>{const n=t(20340);e.exports=function(e,s,t,o,r,i,c,a,l,m,p,u,d,v){const h=n(e,s,t);h.customAttributes.arc=function(e,s,t,n,o){const r=360/n*t,i=(90-r)*Math.PI/180,c=e+o*Math.cos(i),a=s-o*Math.sin(i);return{path:n===t?[["M",e,s-o],["A",o,o,0,1,1,e-.01,s-o]]:[["M",e,s-o],["A",o,o,0,+(r>180),1,c,a]]}},h.text(s/2,t/2,i).attr({"font-size":c,fill:v,"font-weight":"bold"}),h.circle(s/2,t/2,l).attr({stroke:u,"stroke-width":p}),h.path().attr({stroke:d,"stroke-width":m,arc:[s/2,t/2,0,r,a]}).rotate(0,0,0).animate({arc:[s/2,t/2,o,r,a]},1900)}},34956:(e,s,t)=>{const n=t(60019),o=t(13888),{createSelector:r}=t(60985),i=e=>e.courseAssessment;s.courseAssessmentSelector=r([e=>e.course._courseAssessment,i],((e={},s={})=>n({},e,s))),s.courseAssessmentComponentsSelector=r([i,e=>e.components],((e,s)=>e?o(s,e.componentIds):{})),s.courseAssessmentStatusSelector=r(i,(e=>e._isComplete?e._isPassed?"pass":"fail":"incomplete"))},88934:e=>{e.exports=(e,s="_hasBeenViewed")=>{const{component:t,isPageReady:n}=e;return!0===n&&!0===t._isReady&&!0!==t[s]}},96235:(e,s,t)=>{const n=t(72779);e.exports=function(e){return n(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},43855:e=>{e.exports=function(e,s,t,n,o){n&&n.props&&n.props.component?(s.top&&(n.isInviewTop=!0),s.bottom&&(n.isInviewBottom=!0),n.isInviewTop&&n.isInviewBottom&&o&&o(n.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);