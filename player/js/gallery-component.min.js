"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5447],{52540:(e,t)=>{t.GALLERY_ITEM_SELECTED="GALLERY_ITEM_SELECTED",t.galleryItemSelected=(e,i)=>({type:t.GALLERY_ITEM_SELECTED,payload:{componentId:e,itemId:i}})},8703:(e,t,i)=>{const s=i(90882),n=i(12982),o=i(55281),l=i(16760),r=i(58335),a=i(13980),c=i(32823),p=i(2784),m=i(72779),{Component:d}=i(58720),u=i(96235),h=i(88934),_=i(43855),g=i(88078),y=i(96075),v=i(56249),S=i(9668),E=r({displayName:"Gallery",propTypes:{isPageReady:a.bool,screenSize:a.string.isRequired,component:a.object.isRequired,setComponentAsReady:a.func.isRequired,setComponentAsViewed:a.func.isRequired,setComponentAsComplete:a.func.isRequired,galleryItemSelected:a.func.isRequired,styles:a.object},mixins:[c],getInitialState:()=>({_isAutoPlaying:!0}),componentDidMount(){const{props:e}=this;e.setComponentAsReady(e.component._id),this.startAutoPlay()},componentWillUnmount(){this.stopAutoPlay()},UNSAFE_componentWillReceiveProps({component:e}){e._isComplete||s(e._items,(e=>e._isVisited)).length===e._items.length&&this.props.setComponentAsComplete(e._id)},startAutoPlay(){const{props:e}=this;e.component._shouldAutoplay&&(this._interval=setInterval(this.nextStage,e.component._autoplaySpeed))},stopAutoPlay(){const{props:e}=this;e.component._shouldAutoplay&&(clearInterval(this._interval),this._interval=void 0)},nextStage(){const{props:e}=this,t=e.component._items;let i=n(t,(e=>e._isSelected))+1;t[i]||(i=0),this.onGalleryItemSelected(t[i])},onGalleryItemSelected(e){const{props:t}=this;t.galleryItemSelected(t.component._id,e._id)},onToggleAutoPlayClicked(){const{state:e}=this;e._isAutoPlaying?this.stopAutoPlay():this.startAutoPlay(),this.setState({_isAutoPlaying:!e._isAutoPlaying})},onVisibilityChange(...e){_(...e,this,this.props.setComponentAsViewed)},getSelectedItem(){const{component:e}=this.props;return o(e._items,(e=>e._isSelected))},getButtonClassName(){const{component:e}=this.props;return m("ev-button ev-gallery-toggle-autoplay",{"ev-gallery-toggle-autoplay-top":"top"===e._thumbnailPosition,"ev-gallery-toggle-autoplay-bottom":"bottom"===e._thumbnailPosition})},getButtonIconClassName(){const{state:e}=this;return m("ev-icon",{"ev-icon-pause-circle":e._isAutoPlaying,"ev-icon ev-icon-play-circle":!e._isAutoPlaying})},getIsVisibilitySensorActive(){const{component:e,isPageReady:t}=this.props;return!0===t&&!0===e._isReady&&!0!==e._hasBeenViewed},renderPlayButton(){if(this.props.component._shouldAutoplay)return p.createElement("button",{className:this.getButtonClassName(),onClick:this.onToggleAutoPlayClicked},p.createElement("i",{className:this.getButtonIconClassName()}))},renderGraphics(e){const{props:t}=this,i=this.getSelectedItem(),s=l(t.component._items,(s=>{if(!y(s._graphic))return null;const n=(null==i?void 0:i._id)===s._id;return p.createElement(v,{key:s._id,className:m("ev-gallery-image ev-clearfix",{"ev-top":!e}),animations:t.component._animations,startAnimation:n,ariaHidden:!n,style:{display:n?"block":"none"}},p.createElement(g,{graphicSrc:s._graphic.src,graphicSrcAdvanced:s._graphic.srcAdvanced,altText:s._graphic.alt,autoSize:!0,isLightboxEnabled:s._graphic._isLightboxEnabled,lightboxSrc:s._graphic.lightboxSrc,lightboxSrcAdvanced:s._graphic.lightboxSrcAdvanced,isMagnifierEnabled:s._graphic._isMagnifierEnabled}))}));return p.createElement("div",{className:"ev-gallery-items"},s)},renderThumbnails(e){const{props:t}=this,i=l(t.component._items,(e=>y(e._graphic)?p.createElement(S,{key:e._id,item:e,onGalleryItemSelected:this.onGalleryItemSelected,screenSize:t.screenSize}):null));return p.createElement("div",{className:m("ev-gallery-image-select",{"ev-bottom":e})},p.createElement("ul",{className:"ev-gallery-image-select-inner ev-clearfix"},i))},renderWidget(){const{props:e}=this;return"top"===e.component._thumbnailPosition?p.createElement("div",{className:u(e.component)},this.renderThumbnails(!1),this.renderGraphics(!1),this.renderPlayButton()):p.createElement("div",{className:u(e.component)},this.renderGraphics(!0),this.renderPlayButton(),this.renderThumbnails(!0))},render(){const{props:e}=this;return p.createElement(d,{component:e.component,styles:e.styles,isVisibilitySensorActive:h(e),onVisibilityChange:this.onVisibilityChange},this.renderWidget())}});e.exports=E},9668:(e,t,i)=>{const s=i(58335),n=i(13980),o=i(2784),l=i(32823),r=i(72779),a=i(88078),c=s({displayName:"GalleryItem",propTypes:{item:n.object.isRequired,onGalleryItemSelected:n.func.isRequired},mixins:[l],onGalleryItemClicked:function(e){e.preventDefault();const{props:t}=this;t.onGalleryItemSelected(t.item)},getClassName:function(){return r("ev-gallery-item-inner",{"ev-selected":this.props.item._isSelected})},render:function(){const{item:e}=this.props;return o.createElement("li",{className:"ev-gallery-item"},o.createElement("button",{className:this.getClassName(),onClick:this.onGalleryItemClicked},o.createElement(a,{className:"ev-gallery-item-image",graphicSrc:e._graphic.src,graphicSrcAdvanced:e._graphic.srcAdvanced,altText:e._graphic.alt,autoSize:!0})))}});e.exports=c},74793:(e,t,i)=>{const{registerComponent:s}=i(90876),n=i(8703),o=i(34806),{galleryItemSelected:l}=i(52540);s("gallery",{component:n,actions:{galleryItemSelected:l},reducer:o,trackingMap:i(59428)})},34806:(e,t,i)=>{const s=i(55281),n=i(16760),o=i(60019),{SETUP_COMPONENT:l}=i(29933),{GALLERY_ITEM_SELECTED:r}=i(52540);e.exports=(e,t)=>{switch(t.type){case l:return function(e){let t=s(e._items,(e=>e._isSelected));if(e._items.length&&!t){const t=n(e._items,((e,t)=>o({},e,{_isSelected:0===t,_isVisited:0===t})));return o({},e,{_items:t})}return e}(e);case r:return function(e,t){const{itemId:i}=t.payload,s=n(e._items,(e=>e._id===i?o({},e,{_isSelected:!0,_isVisited:!0}):e._isSelected?o({},e,{_isSelected:!1}):e));return o({},e,{_items:s})}(e,t);default:return e}}},59428:e=>{e.exports={_interactionType:{type:"String",default:"interaction",shouldRestore:!1},_items:{fieldKey:"_items",type:"Array",shouldRestore:!0,subMap:{_id:{fieldKey:"_id",type:"String"},_isVisited:{fieldKey:"_isVisited",type:"Boolean",shouldRestore:!0}}}}},88934:e=>{e.exports=(e,t="_hasBeenViewed")=>{const{component:i,isPageReady:s}=e;return!0===s&&!0===i._isReady&&!0!==i[t]}},96235:(e,t,i)=>{const s=i(72779);e.exports=function(e){return s(`ev-${e._component}-widget ev-component-widget ev-clearfix`,{"ev-disabled":!e._isEnabled,"ev-complete ev-show-user-answer":e._isComplete&&!e._isEnabled,"ev-correct":e._isCorrect&&!e._isEnabled,"ev-submitted":e._isSubmitted})}},43855:e=>{e.exports=function(e,t,i,s,n){s&&s.props&&s.props.component?(t.top&&(s.isInviewTop=!0),t.bottom&&(s.isInviewBottom=!0),s.isInviewTop&&s.isInviewBottom&&n&&n(s.props.component._id)):console.error("No component reference passed to helpers/visibilityChangeHandler")}}}]);